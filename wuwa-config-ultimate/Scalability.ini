; ==========================================================================================
;       WuWa Mobile Config - Ultimate Edition v3.2 (Annotated)
;       Scalability.ini - Quality Tier Definitions
; ==========================================================================================

[ScalabilityGroups]
; Force all groups to Level 4 (Ultimate)
sg.ViewDistanceQuality=4
sg.AntiAliasingQuality=4
sg.ShadowQuality=0 ; [v3.6.4] Reset to default
sg.PostProcessQuality=2 ; Kept at 2 to balance bloom and exposure
sg.TextureQuality=4
sg.EffectsQuality=4
sg.FoliageQuality=4
sg.ShadingQuality=4

[ViewDistanceQuality@4]
r.ViewDistanceScale=4.0 ; [DO NOT TOUCH] Extreme rendering range
foliage.LODDistanceScale=4.0 ; [DO NOT TOUCH] Extreme grass rendering range
r.Kuro.NpcAppearDistance=30000 ; Prevents NPCs from appearing out of thin air
r.Kuro.NpcDisplayDistance=25000
r.Kuro.NpcDisappearDistance=35000

[ShadowQuality@4]
; All shadow overrides removed to fix character shadow disappearance
r.ShadowQuality=4

[TextureQuality@4]
r.MaxAnisotropy=16 ; Sharpest textures when viewing at angles (roads/walls)
r.MipMapLODBias=-2.0 ; Forces higher texture resolution (Level -1.0 can cause VRAM crashes)
r.Streaming.PoolSize=2048 ; [v3] 2GB texture pool for 16GB RAM devices
r.Streaming.LimitPoolSizeToVRAM=1

[PostProcessQuality@2]
; Balanced tier to prevent over-processing while keeping reflections high
r.BloomQuality=1
r.AOQuality=2 ; High quality ambient occlusion
r.AmbientOcclusionMaxQuality=100 ; Crisper contact shadows
r.SSR.Quality=4 ; Cinematic reflections
r.SSR.MaxRoughness=0.7 ; Improves reflection coverage
r.SSR.Temporal=1 ; Smooths reflection noise
r.SSGI.Quality=1 ; Stable Global Illumination
r.SSGI.HalfRes=1 ; Performance-friendly GI
r.Tonemapper.Quality=3 ; Best color grading logic
r.EyeAdaptationQuality=2 ; Proper exposure handling

[FoliageQuality@4]
foliage.DensityScale=1.0 ; Max grass density
grass.DensityScale=1.0
r.Kuro.Foliage.MobileFarCullDistanceMax=10000 ; [DO NOT TOUCH] Reverted to stable distance
foliage.LODDistanceScale=4.0 ; [DO NOT TOUCH] Reverted to stable scale
r.Grass.DiscardDistance=10000
