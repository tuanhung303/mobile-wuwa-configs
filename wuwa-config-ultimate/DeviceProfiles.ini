;       WuWa Mobile Config - Ultimate Edition v6.0.0-thermal
;       DeviceProfiles.ini - Hardware Routing & Scoring
;       v6.0.0: Conservative Thermal + AFME UI Ghosting Fix:
;               [THERMAL OPTIMIZATION]
;               - r.Mobile.HBAO.StepCount/ScreenDirCount: 8->6 (43% fewer samples)
;               - r.SSFS.PassAmount: 12->8 (33% fewer passes)
;               - r.TemporalAA.Samples: 8->4 (AFME synergy)
;               - r.Vulkan.MaxFrameLatency: 4->3 (better input feel)
;               - r.Mobile.ForceHighPrecisionPositions=1 (FP16 jitter fix)
;               [AFME 2.0 UI GHOSTING FIX]
;               - r.Kuro.AFME.UIOptimization: 1->2 (stencil masking)
;               - r.TranslucencyOutputsVelocity=1 (damage number MVs)
;               - r.AFME2.MaskEnable=1, r.AFME2.Mode=1 (hardware mask)
;       v5.9.8: Conflict Resolution & Sync Cleanup:
;               - Added r.Kuro.AFME.Enable=5 and r.AFME2.Enable=1 (complete AFME stack)
;               - Added r.Mobile.BasePassOutputsVelocity=1 (TBDR velocity pass)
;               - Added r.Mobile.DisableDepthAndStencilAfterShadowPass=1 (DRAM reduction)
;               - Added r.Vulkan.DescriptorSetStrategy=1 (descriptor churn)
;       v5.9.7: Expert-validated thermal & AFME optimization:
;               - AF reduced to 4x with MipMapLODBias=-0.2 compensation
;               - Vulkan NumWorkerThreads reduced to 4
;               - AFME 2.0 motion vector enhancements
;               - TBDR memory bandwidth optimizations
;       v5.9.6: Thermal Research - VRS/UBWC tradeoff documentation, AFME 2.0 alignment
;       v5.9.5: Thermal Optimization - AF 8x, Shadow 1024 aligned, MaxFrameLatency 4
;       v5.9.4: Tech Lead Refinement - ConcurrentBinning, AsyncCompute, VRS Adaptive
;       v5.9.3: Combat VFX expansion - particles, lighting, ribbon tessellation
;       v5.9.2: Deep contrast restoration, OLED-optimized blacks, parry-tuned latency
;       v5.9.1: HDR disabled, balanced compensation, stability-focused frame pacing
;       v5.8.1: Natural vision - Cinematic tonemapping, reduced color ceiling, infinite foliage
;       v5.8.0: Vivid reality - enabled SSFS, HBAO, and Temporal Reflection Denoising
;       v5.7.0: Optimal vision - integrated Kuro-specific foliage and landscape logic
;       v5.6.0: Performance focus - added ParallelBeginFrame and HalfPrecisionAlbedo
;       v5.5.0-safe: LRZ, UBWC, CommandPool (safe hardware features only)
;       v5.4.1: Draw call optimization sync with Engine.ini
;       v5.4.0: Combat stability - VRS Foveation, Vulkan descriptor optimization
;       v5.3.3: Version sync with Engine.ini AFME stability refinements
;       v5.3.2: Version sync with Engine.ini frame time refinements
;       v5.3.1: Frame time stability optimizations synced with Engine.ini
;       v5.0.1: Added Adreno 840-specific CVars for reliable profile detection
;       v5.0: AFME Frame Gen optimized for Snapdragon 8 Elite (Adreno 840)
;       v4.9: Optimized for Snapdragon 8 Gen 5 with Adreno 840 - MAXED CONFIG
;       v3.6: Centralized logic to Engine.ini. This file now handles hardware identification.
; ==========================================================================================

[Android_Ultimate DeviceProfile]
DeviceType=Android
BaseProfileName=Android
CVars=r.MobileContentScaleFactor=0.0
DeviceScore=3200 ; Unlocks Cinematic menu toggles
; --- Adreno 840 Elite-Tier Overrides ---
+CVars=r.Mobile.AdrenoOcclusionMode=1
+CVars=r.Vulkan.AllowVRS=1
+CVars=r.VRS.Enable=1
+CVars=r.VRS.GPUTier=2                        ; [v5.4.0] Tier 2 VRS for Adreno 840
+CVars=r.VRS.FoveationPattern=1               ; [v5.4.0] Foveated shading - imperceptible quality loss
+CVars=r.VRS.ContentAdaptive=1               ; [v5.9.4] Image-based VRS
+CVars=r.Mobile.ConcurrentBinning=1          ; [v5.9.4] Concurrent Binning
+CVars=r.Mobile.AdrenoGPU.ConcurrentBinning=1 ; [v5.9.4] Adreno-specific binning
+CVars=r.Mobile.AllowAsyncCompute=1           ; [v5.9.4] Async Compute

[Android_Default DeviceProfile]
DeviceType=Android
BaseProfileName=Android_Ultimate

[Android_Adreno7xx DeviceProfile]
DeviceType=Android
BaseProfileName=Android_Ultimate

[Android_Adreno8xx DeviceProfile]
DeviceType=Android
BaseProfileName=Android_Ultimate
+CVars=r.Mobile.AdrenoOcclusionMode=1
+CVars=r.Vulkan.Adreno.TBDR.Optimize=1

[Android_Snapdragon8Gen5 DeviceProfile]
DeviceType=Android
BaseProfileName=Android_Ultimate
DeviceScore=3500

; --- [Resolution & AFME Integrity] ---
; Native resolution ensures AFME has clean motion vectors for 120 FPS generation.
+CVars=r.MobileContentScaleFactor=1.0

; --- [GPU Efficiency: Variable Rate Shading] ---
; [v5.9.6] VRS/UBWC TRADEOFF DOCUMENTATION:
; VRS and UBWC (Universal Bandwidth Compression) are MUTUALLY EXCLUSIVE on Adreno.
; When VRS is enabled, UBWC compression is partially disabled by the Vulkan driver.
;   - VRS: 10-30% GPU fragment shader reduction (better for post-processing heavy scenes)
;   - UBWC: 30-40% memory bandwidth reduction (better for texture-heavy, simple shader scenes)
; For Wuthering Waves (anime-style, heavy post-processing, skill VFX): VRS is optimal.
; The "Magic Bullet" for Adreno 840. Saves heat without blurring the center image.
+CVars=r.Vulkan.AllowVRS=1
+CVars=r.VRS.Enable=1
+CVars=r.VRS.GPUTier=2                  ; Hardware Tier 2 support
+CVars=r.VRS.FoveationPattern=1         ; 1=Low Foveation (Safe), 2=High (More efficient)
+CVars=r.VRS.ContentAdaptive=1          ; Dynamic shading based on texture detail

; --- [Shadow Optimization] ---
; 3 Cascades for depth, but restricted resolution to manage bandwidth.
+CVars=r.Shadow.CSM.MaxCascades=3
+CVars=r.Shadow.MaxResolution=1024      ; [v5.9.5] Aligned with Engine.ini v5.7.0 (stable memory packing)
+CVars=r.Shadow.MaxCSMResolution=1024
+CVars=r.Shadow.MaxNumPointShadowCacheUpdatesPerFrame=2 ; Reduced from 4 (Saves CPU)
+CVars=r.Shadow.MaxNumSpotShadowCacheUpdatesPerFrame=2  ; Reduced from 4 (Saves CPU)

; --- [v5.9.7] Anisotropic Filtering Thermal Optimization ---
; Reduced from 8x to 4x - imperceptible on mobile DPI, significant bandwidth savings
+CVars=r.MaxAnisotropy=4
+CVars=r.Anisotropy=4
+CVars=r.MipMapLODBias=-0.2              ; Slight sharpening to compensate for lower AF

; --- [Foliage & Draw Distance] ---
; 450m is the "Console Sweet Spot". 600m is wasted pixels on mobile.
+CVars=r.Kuro.Foliage.FarCullDistanceMax=45000
+CVars=r.Kuro.Foliage.SuperFarCullDistanceMax=80000
+CVars=r.Kuro.Foliage.ImpostorFarCullDistanceMax=120000

; --- [Adreno 840 Hardware Features] ---
+CVars=r.Vulkan.Adreno.HPMCacheSize=12288
+CVars=r.Mobile.AdrenoOcclusionMode=1
+CVars=r.Mobile.ConcurrentBinning=1     ; Parallelize render passes
+CVars=r.Mobile.AdrenoGPU.ConcurrentBinning=1

; --- [Frame Gen Latency Tuning] ---
+CVars=r.Vulkan.MaxFrameLatency=4       ; [v5.9.5] Increased for maximum AFME frame pacing stability
+CVars=r.Vulkan.WaitOnPresentThread=1
+CVars=r.Vulkan.SubmitOnPresent=1

; --- [v5.9.7] Thread Optimization (Expert-Validated Oryon Architecture) ---
+CVars=r.Vulkan.NumWorkerThreads=4       ; [v5.9.7] Prevents cache thrashing (was 8)

; --- [v6.0.0] Conservative Thermal Optimization ---
+CVars=r.Mobile.HBAO.StepCount=6         ; [v6.0.0] CHANGED from 8 (43% fewer samples)
+CVars=r.Mobile.HBAO.ScreenDirCount=6    ; [v6.0.0] CHANGED from 8
+CVars=r.SSFS.PassAmount=8               ; [v6.0.0] CHANGED from 12 (33% fewer passes)
+CVars=r.TemporalAA.Samples=4            ; [v6.0.0] CHANGED from 8 (AFME synergy)
+CVars=r.Vulkan.MaxFrameLatency=3        ; [v6.0.0] CHANGED from 4 (-16ms input latency)
+CVars=r.Mobile.ForceHighPrecisionPositions=1 ; [v6.0.0] NEW: FP16 jitter fix

; --- [v5.9.7] TBDR Thermal Optimization ---
+CVars=r.Mobile.DiscardDepthStencil=1    ; Prevents GMEM->DRAM depth/stencil resolve
+CVars=r.Mobile.DisableDepthAndStencilAfterShadowPass=1 ; [v5.9.8] Further DRAM write reduction
+CVars=r.Mobile.FullPrecision=0          ; FP16 ALU (2x power efficiency)
+CVars=r.Vulkan.AllowSubpass=1           ; Subpass merging (keeps data in GMEM)
+CVars=r.Vulkan.DescriptorSetStrategy=1  ; [v5.9.8] Reduces descriptor churn overhead

; --- [v5.9.7] AFME 2.0 Motion Vector Enhancement ---
+CVars=r.VertexDeformationOutputsVelocity=1 ; Skeletal mesh motion vectors
+CVars=r.SkeletalMesh.VelocityRendering=1   ; Forced skinned mesh velocity
+CVars=r.Mobile.BasePassOutputsVelocity=1   ; [v5.9.8] Explicit mobile velocity pass for TBDR
+CVars=r.Kuro.AFME.Enable=5                 ; [v5.9.8] AFME Level 5 - Elite hardware frame gen
+CVars=r.AFME2.Enable=1                     ; [v5.9.8] AFME 2.0 generation
+CVars=r.AFME2.MaskEnable=1                 ; [v6.0.0] NEW: Force hardware mask buffer
+CVars=r.AFME2.Mode=1                       ; [v6.0.0] NEW: Game Mode (MV-based)
+CVars=r.Kuro.AFME.LowLatencyMode=1         ; AFME latency reduction
+CVars=r.Kuro.AFME.UIOptimization=2         ; [v6.0.0] CHANGED from 1 - Stencil masking for HUD

; --- [v6.0.0] AFME 2.0 UI Ghosting Fix ---
+CVars=r.TranslucencyOutputsVelocity=1      ; [v6.0.0] NEW: MV capture for damage numbers
+CVars=r.Mobile.TranslucencyOutputsVelocity=1 ; [v6.0.0] NEW: Mobile translucency velocity

; --- [Clock Control] ---
+CVars=r.Vulkan.MaxGPUClockScale=1.0

