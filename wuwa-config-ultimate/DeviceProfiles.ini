; ==========================================================================================
;       WuWa Mobile Config - Ultimate Edition v3.4 (Annotated)
;       DeviceProfiles.ini - GPU & Quality Tier Routing
;       v3.4 Changes: Added clean visual enhancements (reflections, lighting, toon distances)
;       v3.3 Changes: Added Kuro enhanced character features, lens flare, green +1%
; ==========================================================================================

[Android_Ultimate DeviceProfile]
; --- Scale Logic ---
CVars=r.MobileContentScaleFactor=0 ; Native device resolution (0 = device native)
CVars=r.SecondaryScreenPercentage.GameViewport=100 ; Ensures 1:1 pixel rendering (Native resolution)

; --- World Partition Loading (v3.5) ---
CVars=wp.Runtime.LoadingRangeScale=1.25 ; Kuro world loading range
CVars=wp.Runtime.PlannedLoadingRangeScale=1.10
CVars=r.FEstimation.Option=1 ; Frame estimation optimization

; --- Chaos Physics (v3.5) ---
CVars=p.Chaos.Simulation.Enable=1
CVars=p.Chaos.DedicatedThreadEnabled=1

; --- Scalability Routing ---
CVars=sg.ViewDistanceQuality=4 ; Cinematic draw distance
CVars=sg.AntiAliasingQuality=4 ; Ultimate TAA
CVars=sg.ShadowQuality=4 ; Cinematic shadows
CVars=sg.PostProcessQuality=2 ; Balanced Post-Process (Higher levels cause blur/bloom issues)
CVars=sg.TextureQuality=4 ; Max texture resolution
CVars=sg.EffectsQuality=4 ; Cinematic particles
CVars=sg.FoliageQuality=4 ; Max grass density
CVars=sg.ShadingQuality=4 ; Cinematic material shaders

; --- Detail Overrides ---
CVars=r.SkeletalMeshLODBias=-2 ; Force highest detail characters even at distance
CVars=r.StaticMeshLODBias=-2 ; Force highest detail environment props
CVars=foliage.LODDistanceScale=4.0 ; [DO NOT TOUCH]
CVars=r.Shadow.MaxCSMResolution=1536 ; [DO NOT TOUCH]
CVars=r.Shadow.DistanceScale=1.5 ; Extends shadow draw distance
CVars=r.Shadow.RadiusThreshold=0.0001 ; Ensures small objects cast shadows

; --- Lighting Fixes ---
CVars=r.Bloom.Intensity=0.02 ; [DO NOT TOUCH]
CVars=r.Tonemapper.Sharpen=0.8 ; [DO NOT TOUCH]
CVars=r.DetailMode=2 ; Max decorative objects
CVars=r.EyeAdaptation.PreExposureOverride=0.9 ; [DO NOT TOUCH]
CVars=r.Atmosphere.RayleighScatteringScale=1.0 ; [DO NOT TOUCH] Fixes yellow sky tint

; --- Color Balance (v3.3 Refined) ---
CVars=r.TonemapperFilm=1 ; Filmic tonemapper for warm color preservation
CVars=r.Color.Gain.R=1.03 ; [v3.5] Red boost (+3%)
CVars=r.Color.Gain.G=0.95 ; [v3.3] Adjusted green (-5% from neutral, +1% from v3.2)
CVars=r.Color.Gain.B=1.0 ; Standard blue (neutral)

; --- Screen Space & GI ---
CVars=r.SSR.Quality=4 ; Cinematic wet surface reflections
CVars=r.SSR.MaxRoughness=0.7 ; Improves reflection coverage
CVars=r.SSR.Temporal=1 ; Smooths reflection noise
CVars=r.SSGI.Enable=1 ; Global illumination for realistic shadows
CVars=r.SSGI.Quality=1 ; Stable GI quality
CVars=r.SSGI.HalfRes=1 ; Performance-friendly GI resolution
CVars=r.AmbientOcclusionMaxQuality=100 ; Crisper contact shadows
CVars=r.Shaders.FastMath=1 ; Optimized for Adreno GPUs
CVars=r.Shaders.Optimize=1
CVars=r.Vulkan.EnableBindlessRendering=1 ; [DO NOT TOUCH] Performance boost for 8 Elite
CVars=r.Vulkan.MaxFrameLatency=2 ; [v3] Frame Gen requires 2+ buffered frames
CVars=r.ShaderPipelineCache.Enabled=1 ; Stutter reduction
CVars=r.Foliage.ContactShadows=1
CVars=r.Mobile.SceneColorFormat=3 ; [DO NOT TOUCH] 16-bit color depth
CVars=r.SupportAtmosphericFog=0 ; [DO NOT TOUCH]
CVars=r.MotionBlurQuality=0 ; [DO NOT TOUCH]
CVars=r.SceneColorFringeQuality=0 ; [DO NOT TOUCH]

; --- Kuro Enhanced Character Features (v3.3 - 120fps Enhancement) ---
CVars=r.Kuro.HairQuality=2 ; High-quality hair rendering
CVars=r.Kuro.ClothSimulate=1 ; Enable cloth physics simulation
CVars=r.Kuro.CharacterClothQuality=2 ; High cloth detail
CVars=r.Kuro.CharacterShadowQuality=3 ; Enhanced character shadows
CVars=r.Kuro.MobileHairLODBias=0 ; No LOD reduction for hair
CVars=r.Kuro.MobileClothLODBias=0 ; No LOD reduction for cloth
CVars=r.KuroMobile.FacialAnimationQuality=2 ; High facial animation quality
CVars=r.KuroMobile.SkinCacheQuality=2 ; High skin rendering cache
CVars=r.Kuro.EnableCharacterLut=1 ; Character-specific color lookup
CVars=r.KuroMobile.LensFlareQuality=3 ; High-quality lens flare effects
CVars=Kuro.InteractiveLeavesForceMobilePreview=1 ; Interactive foliage on characters

; --- Kuro Clean Visual Enhancements (v3.4) ---
CVars=r.Kuro.EnablePlanarReflection=1 ; Crisp planar reflections
CVars=r.Kuro.GlobalLightQuality=4 ; Maximum lighting quality
CVars=r.Kuro.ToonOutlineDrawDistanceMobile=2000 ; Outline draw distance
CVars=r.Kuro.ToonEyeTransparentDrawDistanceMobile=800 ; Eye sparkle distance
CVars=r.Kuro.ToonFaceShadowMeshDrawDistanceMobile=800 ; Face shadow distance
CVars=r.Mobile.CustomDepthForToonRim=1 ; Toon rim lighting
CVars=r.Mobile.TreeRimLight=1 ; Tree rim lighting
CVars=r.Mobile.EnableKuroSpotlightsShadow=1 ; Spotlight shadows
CVars=r.Shadow.KuroEnablePointLightShadow=1 ; Point light shadows

; --- TAA Anti-Ghosting (v3) ---
CVars=r.TemporalAASharpen=0.2 ; Reduced to prevent artifacts
CVars=r.TemporalAA.CurrentFrameWeight=0.28 ; Increased to reduce ghosting

; --- Device Score Hack ---
DeviceScore=1300 ; Tricks the game engine into unlocking all "Cinematic" menu toggles

[Android_Default DeviceProfile]
BaseProfileName=Android_Ultimate ; Ensures all Android devices default to this profile

; --- Snapdragon Adreno Routing ---
; All modern Snapdragon GPUs inherit the Ultimate profile
[Android_Adreno7xx DeviceProfile]
BaseProfileName=Android_Ultimate

[Android_Adreno8xx DeviceProfile]
BaseProfileName=Android_Ultimate

[Android_Snapdragon8Gen5 DeviceProfile]
BaseProfileName=Android_Ultimate
