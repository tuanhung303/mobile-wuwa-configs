; ==========================================================================================
;       WuWa Mobile Config - Ultimate Edition v2 (Annotated)
;       Target: 90 FPS | Max Quality | Natural Lighting | Stable Memory
;       Device: Snapdragon 8 Gen 5 / 16GB RAM (RedMagic 11 Pro)
; ==========================================================================================

[SystemSettings]
; --- Stability & Blueprint Logic ---
Blueprint.EnableFrameScripts=1 ; Required for game logic consistency
Blueprint.EnableEvents=1 
Blueprint.EnableEventsBudget=0 ; Disable budget to prevent script hitching on high-end CPUs
Blueprint.EnableFrameScriptsBudget=0
Blueprint.EnablePhysicsBudget=0
Blueprint.EnableVehicles=1
Kuro.Blueprint.EnableGameBudget=0 ; Ensures game logic doesn't skip frames during intense combat
Kuro.Blueprint.EnablePhysics=1
Kuro.Blueprint.EnablePhysicsBudget=0

; --- Frame Rate Control ---
t.MaxFPS=90 ; Targets 90Hz display refresh for smoother motion
t.MinFPS=60 ; Prevents aggressive downclocking during idle
FrameRateLimit=90.0
r.VSync=0 ; Disable VSync to reduce input lag; use Swappy for pacing instead
a.UseSwappyForFramePacing=1 ; Android standard for smooth frame delivery and low latency

; --- Lighting Fixes (The "Yellow/Over-Exposed" Fix) ---
r.DefaultFeature.Bloom=1 ; Required for skill VFX
r.BloomQuality=1 ; High quality bloom filter
r.Bloom.Intensity=0.02 ; Tightened from default to prevent blinding skill effects
r.Bloom.Threshold=5.0 ; Higher threshold ensures only the brightest pixels bloom (reduces haze)
r.Bloom.SizeScale=0.005 ; Keeps bloom "crisp" around lights rather than washing out the screen
r.Mobile.HDR=1 ; Enables high dynamic range for better color depth
r.HDR.EnableHDROutput=1 ; Allows the display to utilize full peak brightness
r.Atmosphere.RayleighScatteringScale=1.0 ; FIX: Restores blue sky; values > 1.0 cause yellow/orange tint
r.Atmosphere.MieScatteringScale=0.8 ; FIX: Reduces sun-haze/fog over-exposure
r.Atmosphere.SunLightIntensity=1.0 ; Standard sun intensity to prevent blowout

; --- Anti-Aliasing & Upscaling ---
r.DefaultFeature.AntiAliasing=2 ; Enables TAA
r.AntiAliasingMethod=2 ; Temporal Anti-Aliasing (Best for edge stability)
r.PostProcessAAQuality=4 ; High-quality TAA samples (Level 6 causes crashes)
r.TemporalAASamples=8 ; Optimized sample count for 90 FPS
r.TemporalAASharpen=0.6 ; Balances TAA blur without adding over-sharpening halos
r.TemporalAA.HistoryScreenPercentage=100 ; Native resolution history (200% causes OOM crashes)
r.FidelityFX.FSR.Enabled=True ; Enables AMD FSR for better edge reconstruction
r.FidelityFX.FSR.QualityMode=1 ; Balanced quality for 90 FPS stability

; --- Shadows (Ultimate Stable) ---
r.ShadowQuality=4 ; Cinematic shadow tier
r.Shadow.CSM.MaxCascades=6 ; RESTORED: Deep shadow depth (Level 10 causes draw-call crashes)
r.Shadow.CSM.MaxMobileCascades=6
r.ShadowProjectionScale=4.0 ; Increases shadow resolution at distance
r.Shadow.MaxCSMResolution=1536 ; High sharpness; 2048 is too risky for VRAM crashes
r.Shadow.RadiusThreshold=0.0001 ; Ensures small objects (grass/debris) still cast shadows
r.Shadow.AllShadowDrawcallMax=8192 ; Guardrail to prevent GPU driver timeout crashes
r.Shadow.SkeletalMeshLODBias=-1 ; Forces higher quality character shadows
r.Shadow.StaticMeshLODBias=-1 ; Forces higher quality environment shadows

; --- Screen Space Effects (SSR & GI) ---
r.SSR.Quality=4 ; High quality reflections on wet surfaces
r.SSGI.Enable=1 ; Enables Global Illumination for bounce-lighting depth
r.SSGI.Quality=1 ; Level 1 provides the look with 70% less performance cost than Level 4
r.ReflectionCaptureResolution=128 ; High resolution cubemaps for characters

; --- Niagara & VFX ---
fx.Niagara.QualityLevel=2 ; Cinematic VFX (Level 1 is too "flat")
fx.NiagaraKuroTickUpdateTime=0.1 ; Balances VFX smoothness vs CPU overhead
r.Niagara.EmitterViewDistanceScale=5.0 ; Prevents skills from disappearing too early in distance
r.ParticleLightQuality=1 ; Particles cast light on the environment

; --- Water Rendering ---
r.Mobile.WaterQuality=1 ; Enables high-quality water shaders
r.Mobile.WaterSSR=1 ; Enables Screen Space Reflections on water
r.Water.WaterMesh.LODCountBias=2 ; Prevents water mesh from looking low-poly nearby

; --- Streaming & Memory (16GB RAM Optimized) ---
r.TextureStreaming=1 
r.Streaming.PoolSize=1280 ; Allocates 1.2GB for textures (Prevents pop-in; safe for 12GB+ devices)
r.Streaming.MaxTempMemoryAllowed=512 ; Increases cache for fast-moving scenes
wp.Runtime.KuroRuntimeStreamingRangeOverallScale=1.5 ; Balances world loading distance vs crash risk

; --- Threading & Vulkan ---
r.Vulkan.Enable=1 ; Best API for Snapdragon 8 Gen 5
r.Vulkan.NumWorkerThreads=4 ; Optimized for octa-core (Prevents thermal throttling crashes)
r.Vulkan.EnableRayQuery=0 ; CRITICAL: Ray Query is experimental and causes instant crashes
r.Vulkan.MaxFrameLatency=2 ; Balances input lag vs smooth frame pacing
t.MaxWorkerThreads=4 ; Syncs with Vulkan threads for stability

; --- Garbage Collection ---
gc.IncrementalReachabilityTimeLimit=0.005 ; Prevents 1ms GC hitches during combat
gc.TimeBetweenPurgingPendingKillObjects=60.0 ; Faster cleanup of deleted objects to save RAM

[/Script/Engine.RendererSettings]
r.EarlyZPass=3 ; Optimizes depth rendering
r.EarlyZPassMovable=1
r.Mobile.HDR=1
r.Tonemapper.Quality=3 ; Highest stable tonemapper logic
r.Tonemapper.Sharpen=0.8 ; Final image crispness
r.EyeAdaptation.PreExposureOverride=0.9 ; FIX: Reduces overall scene brightness to prevent over-exposure
r.ViewDistanceScale=4.0 ; Cinematic draw distance for mountains/buildings
