;       WuWa Mobile Config - Ultimate Edition v5.5.0-safe (Safe Optimizations Only)
;       Target: Native 60 FPS -> 120 FPS via AFME Hardware Frame Generation
;       Device: Snapdragon 8 Elite (Gen 5) / 16GB RAM / Adreno 840 - MAXED CONFIG
;       
;       ======================== FRAME GENERATION ARCHITECTURE ========================
;       This config uses a SINGLE frame generation path to avoid interpolation conflicts:
;       
;       [ENABLED]  AFME Level 5 (Kuro's hardware-accelerated frame gen on Adreno 840)
;                  - Uses motion vectors from engine for accurate interpolation
;                  - Lower input latency than software solutions (~8-12ms)
;                  - UI rendered separately (no ghosting on damage numbers)
;       
;       [DISABLED] FSR3 Frame Interpolation (r.FidelityFX.FSR3.FI=0)
;                  - CONFLICTS with AFME - causes double-interpolation artifacts
;                  - Would add 30-50ms latency on top of AFME
;                  - FSR3 UPSCALING is still enabled for anti-aliasing/sharpening
;       
;       [DISABLED] FSR1/FSR2 (superseded by FSR3 upscaler)
;       
;       [DISABLED] Phone's Game Space Frame Doubler (disable in RedMagic Game Space)
;                  - Operates at OS level, would cause triple-interpolation
;       
;       ============================ CRITICAL SETTINGS ================================
;       t.MaxFPS=60          : MUST be 60 for AFME to interpolate to 120 FPS
;                              Setting to 120 would disable frame gen entirely
;       r.Kuro.AFME.Enable=5 : Level 5 = Elite mode for Adreno 840 hardware
;       r.FidelityFX.FSR3.FI=0 : MUST be 0 to prevent AFME conflict
;       ===============================================================================
;
;       v5.5.0-safe Changes: SAFE OPTIMIZATIONS ONLY (Risky settings excluded):
;                     [HARDWARE - Driver Level]
;                     - LRZ: Enabled Low-Resolution Z culling (Adreno hardware feature)
;                     - UBWC: Enabled Universal Bandwidth Compression
;                     - CommandPool: Per-thread command pools (reduces lock contention)
;                     [MEMORY & STREAMING]
;                     - Texture Pool: Increased to 6GB (eliminates thrashing)
;                     - IO Bandwidth: Doubled for UFS 4.0 utilization
;                     - IO Dispatcher: 64 parallel requests for fast storage
;                     [SHADOWS & CULLING]
;                     - Shadow Bias: Tuned to reduce acne/peter-panning
;                     - Light Clustering: Capped at 48 lights per tile
;                     [THREADING]
;                     - Core Affinity: Expanded to ALL Performance cores (0-5)
;                     - Animation: Parallel bone updates
;                     [EXCLUDED - Caused Crashes]
;                     - GPU Scene (r.Mobile.EnableGPUScene) - Game may not support
;                     - Wave32 (r.Vulkan.EnableWave32) - Shader incompatibility
;                     - Subpass Merging - Render pass conflicts
;                     - Async FX Tick - Threading issues
;                     - Parallel Physics Solve - Jitter issues
;       v5.4.1 Changes: DRAW CALL OPTIMIZATION (Senior UE4 Graphics Tech Lead - Zero Visual Impact):
;                     - Draw Batching: Added DynamicInstancing, UseCachedCommands, ParallelPassSetup
;                     - GPU Scene: MaxInstancesPerDraw=2048 for larger batch sizes
;                     - Occlusion: Added AllowOcclusionQueries=1 for hardware queries
;                     - GPU Skinning: Added GPUSkin.Limit2BoneInfluences=0 (keeps 4-bone quality)
;                     - Parallel: Added ParallelAnimEvaluation for animation threading
;                     - All changes are pure technical - no visual quality reduction
;       v5.4.0 Changes: COMBAT STABILITY (Senior UE4 Graphics Tech Lead - Art Director Reviewed):
;                     - GPU Debug: Disabled r.GPUCrashDebugging for production (removes CPU-GPU sync)
;                     - GC Pool: Reduced gc.MaxObjectsInGame from 25M to 4M (faster traversal)
;                     - Threading: Disabled FX.AllowAsyncTick (avoids Big.LITTLE scheduling overhead)
;                     - Vulkan: Optimized descriptor sets and frame latency for Adreno 840
;                     - Niagara: Restored scalability (Min=2) while preserving max quality ceiling
;                     - Shadows: Reduced cascades from 4 to 3 (Art Director approved balance)
;                     - VRS: Added foveated shading for free GPU headroom
;                     - Memory: Reduced IO cache from 2GB to 512MB (frees GPU memory)
;       v5.3.3 Changes: AFME STABILITY (Senior UE4 Graphics Tech Lead):
;                     - Pacing: r.OneFrameThreadLag=1 for GT/RT parallelization
;                     - Buffer: r.Vulkan.MaxFrameLatency=4 for maximum throughput stability
;                     - GC: Reduced time limits to 1ms for smoother frame budget
;                     - Streaming: Capped loading spikes to 1ms for combat stability
;       v5.3.2 Changes: FRAME TIME MICRO-OPTIMIZATION (Senior UE4 Graphics Tech Lead):
;                     - GC Reachability: Further tightened to 0.001s (1ms = 6% of frame budget)
;                     - Vulkan: Added AsyncPipelineCompilation for PSO stutter reduction
;                     - Validation: Confirmed all settings align with Epic official defaults
;       v5.3.1 Changes: FRAME TIME STABILITY (Senior UE4 Graphics Tech Lead):
;                     - GC Budget: Aligned with Epic official (0.002s per frame)
;                     - GC Reachability: Reduced from 5ms to 2ms to cut frame spikes
;                     - Bloom Quality: Restored to 5 (Adreno 840 has compute headroom)
;                     - GT Sync: Added r.GTSyncType=1 for smooth AFME frame delivery
;                     - Vulkan Batching: Added SubmitAfterEveryDrawCalls=0 for TBDR
;       v5.3.0 Changes: PERFORMANCE SYNC (Senior UE4 Tech Lead):
;                     - GPU Clock: Increased to 1.0 (Synced with Performance.ini v5.3.0)
;                     - Thermal: Threshold set to 48C for sustained peak performance
;       v5.2.2 Changes: FRAME TIME STABILITY (Senior UE4 Graphics Tech Lead):
;                     - Worker Threads: Increased to 8 to utilize all Oryon cores
;                     - SSS Samples: Reduced to 2 (imperceptible on mobile DPI)
;                     - IO Cache: Increased to 2048MB for smoother asset streaming
;                     - Deprecated: Removed a.SkeletalMesh.ISPC (use a.SkinnedAsset.ISPC)
;                     - Bloom Quality: Reduced to 3 for cleaner 120 FPS interpolation
;       v5.2.1 Changes: PERFORMANCE REFINEMENTS (Senior UE4 Tech Lead):
;                     - Thermal Threshold: Increased to 49C for RedMagic active cooling
;                     - SSR Quality: Reduced to 3 for better frame time stability
;                     - Bloom Quality: Reduced to 4 for GPU headroom
;                     - Vulkan Pacing: Enabled UsePresentThread for smoother delivery
;       v5.2.0 Changes: FRAME STABILITY REFINEMENTS (Senior UE4 Tech Lead):
;                     - Shadow Resolution: Reduced from 2048 to 1536 for stable frame times
;                     - Config Cleanup: Removed redundant FSR3 FI CVars (see conflict block)
;                     - HPM Cache: Corrected to 12288 (Adreno 840 L2 = 12MB specification)
;                     - Documentation: Added FSR3 FI conflict warning block
;       v5.1.0 Changes: SKILL EFFECTS MAXIMIZED (Senior UE4 Tech Lead):
;                     - Niagara Quality: Set to 3 (MAX) for full particle fidelity
;                     - Bloom: Dramatic Intensity (0.20) with Tight Spread (0.005)
;                     - Particle Lighting: Set to 2 (MAX) for environmental illumination
;                     - Interactive Effects: Enabled Water, Leaves, Physics, and Houdini FX
;                     - Decals: Increased MaxActive to 128 for richer ground skills
;       v5.0.2 Changes: Adreno 840 Micro-Optimizations (Senior UE4 Tech Lead):
;                     - Increased r.Vulkan.PipelineLRUCapacityMaximum to 128 (16GB RAM overhead)
;                     - Adjusted Niagara.GPUCulling.CPUToGPUThreshold to 1024 for balanced offloading
;       v5.0.1 Changes: FRAME TIME STABILITY (Senior UE4 Tech Lead Review):
;                     - Added r.OneFrameThreadLag=0 for reduced input latency
;                     - Removed duplicate settings identified in Performance.ini
;                     - Enhanced DeviceProfiles.ini with Adreno 840-specific CVars
;       v5.0 Changes: FRAME GEN ARCHITECTURE CLEANUP (Reviewed by Senior UE4 Tech Lead):
;                     - Frame Gen: AFME-only architecture (disabled conflicting FSR3 FI)
;                     - FPS Cap: Set to 60 native (AFME interpolates to 120)
;                     - FSR Stack: Disabled FSR1/FSR2, kept FSR3 for upscaling only
;                     - GPU Clock: Increased to 1.0 (active cooling on gaming phone)
;                     - Shadows: Increased cascades to 4 (Adreno 840 headroom)
;                     - Async Compute: Increased AO budget to 4 (full 840 utilization)
;       v4.9 Changes: OPTIMIZED FOR STABLE 60 FPS NATIVE + FRAME GEN:
;                     - AFME: Level 5 (Adreno 840 max quality)
;                     - AO Async Compute: Reduced from 4 to 2 (frees GPU for frame gen pipeline)
;                     - Niagara Quality: Reduced from 2 to 1 (stable frame times during combat)
;                     - FSR3: Added frame rate bounds (55-65 FPS) for consistent frame gen
;                     - Frame Pacing: Added FakeFrameRate=60 for FSR3 timing stability
;                     - GPU Clock: 0.85 for thermal headroom on Adreno 840
;                     - Adreno 840: Optimized HPM cache (24MB), TBDR, FastZClear
;                     - Thermal: Optimized thermal management for sustained performance
;       v4.8 Changes: Adreno 840 "Elite" GPU Offloading & Async Compute
;       v4.6 Changes: Adreno 840 "Elite" Final Optimizations
;       v4.5 Changes: Adreno 840 "Elite" Optimizations
;       v4.4 Changes: Performance micro-optimizations (Oracle-validated)
;       v4.3 Changes: CPU/GPU throughput optimizations (Oracle-validated)
;       v4.2 Changes: Performance optimizations without aesthetic impact
;       v4.1 Changes: Oracle-validated optimizations for Snapdragon 8 Elite
; ==========================================================================================
;
[SystemSettings]
r.Mobile.EnableGPUSkinning=1
r.GPUSkinning.SupportComputeSkinning=1
r.SkinCache.Mode=1
r.SkinCache.CompileShaders=1
r.SkinCache.RecomputeTangents=1
r.SkinCache.SceneMemoryLimitInMB=256
r.GPUSkin.Limit2BoneInfluences=0                      ; [v5.4.1] Keep 4-bone quality (visual safety)
; --- Async Logic ---
r.AsyncCompute=1
r.RHICmdUseAsyncCompute=1
r.AmbientOcclusion.AsyncComputeBudget=4 ; [v5.0] INCREASED to 4 - Adreno 840 has excellent async compute capacity; allows GTAO to run parallel with rasterization for stable frame times
r.Vulkan.EnableQueuePriority=1
; --- Scale Logic (v3.6 Centralized) ---
r.MobileContentScaleFactor=0 ; Native device resolution (0 = device native)
r.SecondaryScreenPercentage.GameViewport=100 ; Ensures 1:1 pixel rendering (Native resolution)
r.FEstimation.Option=1 ; [v4.6] ENABLED: Native hardware frame generation (AFME) for 120 FPS stability
; --- Stability & Blueprint Logic ---
Blueprint.EnableFrameScripts=1 ; Required for game logic consistency
Blueprint.EnableEvents=1 
Blueprint.EnableEventsBudget=0 ; Disable budget to prevent script hitching on high-end CPUs
Blueprint.EnableFrameScriptsBudget=0
Blueprint.EnablePhysicsBudget=0
Blueprint.EnableVehicles=1
Kuro.Blueprint.EnableGameBudget=0 ; Ensures game logic doesn't skip frames during intense combat
Kuro.Blueprint.EnablePhysics=1
Kuro.Blueprint.EnablePhysicsBudget=0
; --- Chaos Physics Simulation (v3.5) ---
p.Chaos.Simulation.Enable=1
p.Chaos.DedicatedThreadEnabled=1
p.Chaos.GC.UseReplicationV2=true
p.Chaos.Solver.Collision.AllowManifoldUpdate=1
p.Chaos.DebugDraw.Enabled=false
p.Chaos.Solver.Collision.CullDistance=-1
p.Chaos.NewtonEvolution.FastPositionBasedFriction=true
p.Chaos.Solver.InertiaConditioning.Enabled=true
p.Chaos.MaxNumWorkers=4
p.Chaos.SmallBatchSize=10
p.Chaos.LargeBatchSize=100
; --- Physics ISPC Vectorization (v4.0 - Missing from test.ini) ---
p.AggregateGeom.ISPC=1
p.Chaos.AABBTransform.ISPC=1
p.Chaos.AxialSpring.ISPC=1
p.Chaos.Bending.ISPC=1
p.Chaos.BoxCalcBounds.ISPC=1
p.Chaos.CalculateBounds.ISPC=1
p.Chaos.CollisionSpring.ISPC=1
p.Chaos.DampVelocity.ISPC=1
p.Chaos.GetSimData.ISPC=1
p.Chaos.LongRange.ISPC=1
p.Chaos.MultiRes.ISPC=1
p.Chaos.PerParticleCollision.ISPC=1
p.Chaos.PostIterationUpdates.ISPC=1
p.Chaos.PreSubstepInterpolation.ISPC=1
p.Chaos.SkinPhysicsMesh.ISPC=1
p.Chaos.SoftBodyCollision.ISPC=1
p.Chaos.Spherical.ISPC=1
p.Chaos.Spring.ISPC=1
p.Chaos.TriangleMesh.ISPC=1
p.Chaos.VelocityField.ISPC=1
p.Chaos.XPBDBending.ISPC=1
p.Chaos.XPBDSpring.ISPC=1
p.Chaos.XPBDStretchBias.ISPC=1
; Legacy Apex (minimal)
apex.DbgDraw=false
apex.ChunkFractureEnabled=false
apex.ForceMinimalFracture=true
; --- [v4.3] Draw Call Optimization (Oracle-validated) ---
r.MeshDrawCommands.MobileBasePassDrawcallLimit=24000  ; Prevents mid-frame buffer reallocs
r.MeshDrawCommands.ShadowPerBatchDrawcallMax=6        ; Shadow draw call batching
; --- [v5.4.1] Draw Call Batching (Zero Visual Impact) ---
r.MeshDrawCommands.DynamicInstancing=1                ; Batches identical meshes automatically
r.MeshDrawCommands.UseCachedCommands=1                ; Caches draw commands between frames
r.MeshDrawCommands.ParallelPassSetup=1                ; Parallel pass setup on worker threads
r.GPUScene.MaxInstancesPerDraw=2048                   ; Larger batch sizes for instanced draws
; --- Anti-Flicker Safeguard (v3.1) ---
; Prevents black/white flickering boxes on some Adreno GPUs
; 0 = Hardware occlusion queries (stable), 1 = HZB system, 2 = Force HZB
r.HZBOcclusion=0
r.AllowOcclusionQueries=1                             ; [v5.4.1] Enable hardware occlusion queries (works with HZBOcclusion=0)
; --- Frame Rate Control & Pacing (v5.0.1 AFME-Optimized) ---
; ===================== CRITICAL: DO NOT CHANGE WITHOUT UNDERSTANDING =====================
; t.MaxFPS=60 is REQUIRED for AFME frame generation to work correctly.
; - AFME takes 60 FPS native input and interpolates to 120 FPS output
; - Setting t.MaxFPS=120 would make the game render 120 natively, leaving AFME nothing to do
; - If you want native 120 FPS (no frame gen), set t.MaxFPS=120 AND r.Kuro.AFME.Enable=0
; ==========================================================================================
t.MaxFPS=60                       ; [v5.0] Native 60 FPS cap - AFME doubles to 120 FPS
t.MinFPS=45
FrameRateLimit=60.0               ; [v5.0] Match t.MaxFPS for consistent frame pacing
r.VSync=0
r.OneFrameThreadLag=1             ; [v5.3.3] CHANGED: Enables GT/RT parallelization for stable AFME frame delivery
r.GTSyncType=1                    ; [v5.3.1] ADDED: Synchronizes GT/RT cadence for smooth AFME frame delivery
a.UseSwappyForFramePacing=0
; [v4.0 CAUTION] Experimental RHI Pacing - may improve smoothness or cause crashes
r.Vulkan.CPURHIThreadFramePacer=0 ; [v4.6] DISABLED: Conflicts with AFME hardware frame generation
; --- Lighting Fixes (The "Yellow/Over-Exposed" Fix) ---
r.DefaultFeature.Bloom=1 ; Required for skill VFX
r.BloomQuality=5 ; [v5.3.1] Restored to Epic default - Adreno 840 has compute headroom for full Gaussian convolution
r.Bloom.Intensity=0.20 ; [v5.1.0] DRAMATIC: High brightness for skill glow
r.Bloom.Threshold=3.0 ; [v5.1.0] RICHNESS: Lower threshold allows more skill elements to glow
r.Bloom.SizeScale=0.005 ; [DO NOT TOUCH] Keeps bloom tight and crisp
r.Bloom.Cross=0.8 ; [v5.1.0] DRAMATIC: Adds star/cross flare to bright skill impacts
r.Mobile.HDR=1 ; Enables high dynamic range for better color depth
r.Mobile.DeferredShadingSimple=1 ; [v4.3] Optimizes G-Buffer packing for Adreno GMEM
r.HDR.EnableHDROutput=1 ; Allows the display to utilize full peak brightness
r.Atmosphere.RayleighScatteringScale=1.0 ; [DO NOT TOUCH] Fixes yellow/orange sky tint
r.Atmosphere.MieScatteringScale=0.8 ; [DO NOT TOUCH] Fixes sun-haze over-exposure
r.Atmosphere.SunLightIntensity=1.0 ; Standard sun intensity to prevent blowout
r.Color.Mid=0.5 ; Ensures neutral midtones
r.SupportAtmosphericFog=0 ; DISABLED: Fog disabled for visual clarity
r.Fog=0
r.VolumetricFog=0
; --- Post-Process Cleanup ---
r.MotionBlurQuality=0 ; DISABLED: Removes blur during fast camera movement
r.SceneColorFringeQuality=0 ; DISABLED: Removes Chromatic Aberration (color bleeding on edges)
r.ChromaticAberrationQuality=0
r.FilmGrain=0 ; DISABLED: Removes noise for a cleaner image
; --- Anti-Aliasing & Upscaling (FSR3 Upscaling Only - NO Frame Interpolation) ---
; ===================== FSR STACK ARCHITECTURE (v5.0) =====================
; IMPORTANT: Only FSR3 UPSCALING is enabled. Frame Interpolation is handled by AFME.
; 
; FSR1 (Spatial):  DISABLED - Legacy, superseded by FSR3
; FSR2 (Temporal): DISABLED - Superseded by FSR3's temporal component
; FSR3 Upscaling:  ENABLED  - Provides anti-aliasing and edge reconstruction
; FSR3 FI:         DISABLED - Conflicts with AFME (causes double-interpolation)
;
; WARNING: Enabling FSR3.FI + AFME simultaneously causes:
;          - Extreme ghosting (interpolating already-interpolated frames)
;          - 30-50ms additional input latency
;          - Visual artifacts and UI smearing
; =========================================================================
r.DefaultFeature.AntiAliasing=0              ; DISABLED: Handled by FSR3 upscaler
r.AntiAliasingMethod=0                       ; DISABLED: Handled by FSR3 upscaler
; --- FSR1 (DISABLED - Legacy) ---
r.FidelityFX.FSR.Enabled=0                   ; [v5.0] DISABLED: Superseded by FSR3
; --- FSR2 (DISABLED - Superseded by FSR3) ---
r.FidelityFX.FSR2.Enabled=0                  ; [v5.0] DISABLED: FSR3 includes all FSR2 benefits
r.FidelityFX.FSR2.QualityMode=1              ; (Inactive - FSR2 disabled)
r.FidelityFX.FSR2.Sharpness=1.0              ; (Inactive - FSR2 disabled)
r.FidelityFX.FSR2.AdjustMipBias=1            ; (Inactive - FSR2 disabled)
r.FidelityFX.FSR2.CreateReactiveMask=1       ; (Inactive - FSR2 disabled)
r.FidelityFX.FSR2.DeDither=2                 ; (Inactive - FSR2 disabled)
; --- FSR3 Upscaling (ENABLED) + Frame Interpolation (DISABLED) ---
r.FidelityFX.FSR3.Enabled=1                  ; [v5.0] ENABLED: FSR3 for upscaling/AA only
r.FidelityFX.FSR3.QualityMode=1              ; Quality mode (1=Quality, best for 60 FPS target)
r.FidelityFX.FSR3.FI=0                       ; [v5.0] DISABLED: Frame Interp OFF - AFME handles this
r.FidelityFX.FSR3.AdjustMipBias=1            ; Texture mip bias adjustment for FSR3
r.FidelityFX.FI.Enabled=0                    ; [v5.0] DISABLED: FI module OFF - prevents AFME conflict
; --- [v5.4.0] Frame Time Stability Optimization ---
; These settings ensure smooth frame delivery for AFME frame generation
r.GPUCrashDebugging=0                        ; [v5.4.0] DISABLED: Removes forced CPU-GPU sync points (production mode)
r.SyncWaitingForGPU=0                        ; [v5.4.0] DISABLED: Let GPU pipeline freely for maximum throughput
r.RHICmdFlushRenderThreadCommands=1          ; Ensures commands complete before next frame
r.FidelityFX.FSR3.UseHighQualityModes=1      ; Balances quality with 60 FPS native stability
; ===================== DO NOT ADD THESE SETTINGS - CONFLICTS WITH AFME =====================
; The following FSR3 Frame Interpolation CVars MUST NOT be added as they conflict with AFME:
;
;   r.FakeFrameRate=XX.0           - FSR3 FI timing reference (conflicts with AFME clock)
;   r.FidelityFX.FI.FrameRateMin   - FSR3 FI lower bound (AFME handles pacing internally)
;   r.FidelityFX.FI.FrameRateMax   - FSR3 FI upper bound (AFME handles pacing internally)
;   r.FidelityFX.FI.DebugOutput    - FSR3 FI debug (unnecessary when FI disabled)
;   r.FidelityFX.FSR3.FI=1         - FSR3 Frame Interpolation (causes double-interpolation)
;   r.FidelityFX.FI.Enabled=1      - FSR3 FI master toggle (same conflict as above)
;
; REASON: AFME (Adreno Frame Motion Engine) provides hardware-accelerated frame generation
;         on Adreno 840. Enabling FSR3 FI simultaneously causes:
;         - Double-interpolation artifacts (ghosting, smearing)
;         - 30-50ms additional input latency stacked on AFME's 8-12ms
;         - UI ghosting on damage numbers and skill icons
;         - Visual artifacts during fast camera movement
;
; If you want to use FSR3 FI instead of AFME, you must:
;   1. Set r.Kuro.AFME.Enable=0
;   2. Set r.FidelityFX.FSR3.FI=1
;   3. Set r.FidelityFX.FI.Enabled=1
;   4. Add r.FakeFrameRate and FrameRate bounds
;   5. Accept the higher latency tradeoff (~15-20ms vs 8-12ms)
; ==========================================================================================
; --- [EXPERIMENTAL v3.1] GPU-Accelerated TAA ---
; Offloads TAA computation to GPU compute pipeline - may improve performance on 8 Elite
; To revert: Comment out or set to 0
r.TemporalAA.MobileUseCompute=1
r.TemporalAA.MobileCatmullRom=1 ; Higher quality interpolation filter
; --- [EXPERIMENTAL v3.1] Velocity Rendering ---
; Improves TAA motion detection for cleaner edges during fast movement
; To revert: Comment out all three lines below
r.Mobile.EnableOutlineVelocity=1
r.Mobile.RenderVelocity=1
r.BasePassOutputsVelocity=1
; --- Mesh LOD Bias ---
r.SkeletalMeshLODBias=-2 ; Global mesh LOD bias (higher detail at distance)
r.StaticMeshLODBias=-2
; --- Decal System (v5.4.0 - Art Director Approved) ---
r.Decal.MaxActive=96 ; [v5.4.0] REDUCED from 128 - Art Director approved balance (prevents HPM pressure)
r.Decal.FadeScreenSize=0.005 ; [v5.1.0] IMPROVED: Decals visible longer at distance
r.Decal.NormalProjectionEnabled=1
r.Decal.FadeDurationScale=3.0
r.Decal.FadeScreenSizeMult=0.80
r.Decal.NormalReprojectionThresholdHigh=0.995
r.Decal.NormalReprojectionThresholdLow=0.99
r.Decal.StencilSizeThreshold=0.1
r.Decal.Visibility.Multithreaded=1
r.DecalDepthBias=0.005
; --- Screen Space Effects (SSR & GI) ---
r.SSR.Quality=2 ; [v5.4.0] REDUCED from 3 - Art Director: "SAFE" on mobile DPI
r.SSR.MaxRoughness=0.8 ; [v4.5] Expanded reflection range for 8 Elite
r.SSR.Temporal=1 ; Reduces noise/jitter in reflections
r.Anisotropy=16 ; [v4.6] PC-class texture sharpness
r.MaxAnisotropy=16
r.Mobile.SubsurfaceScattering=1 ; [v4.6] Character skin light bleed
r.SSS.SampleCount=1 ; [v5.4.0] REDUCED from 2 - Art Director: "SAFE - negligible on mobile toon shading"
r.ContactShadows=1 ; [v4.6] Improved grounding shadows
r.ContactShadows.NonShadowCastingIntensity=0 ; Prevents toon skin artifacts
r.SSGI.Enable=0 ; [v4.2] DISABLED: Kuro GI handles this; UE4 SSGI causes halos
; r.SSGI.Quality=1 ; [v4.2] Commented - no effect when SSGI disabled
r.SSGI.HalfRes=1 ; Optimizes GI rendering for high-end mobile
r.ReflectionCaptureResolution=128
; --- Niagara & VFX ---
fx.Niagara.QualityLevel=3         ; [v5.1.0] MAXIMUM: Full particle fidelity and count for skill effects
fx.Niagara.QualityLevel.Min=2     ; [v5.4.0] CHANGED: Allows graceful degradation during intense bursts (Art Director approved)
fx.Niagara.QualityLevel.Max=3     ; [v5.1.0] HARD LOCK: Ensures consistent Epic-tier fidelity
fx.NiagaraKuroTickUpdateTime=0.1 ; Balances VFX smoothness vs CPU overhead
r.Niagara.EmitterViewDistanceScale=3.0 ; [v5.4.0] REDUCED from 6.0 - Art Director approved balance
r.ParticleLightQuality=2          ; [v5.1.0] MAXIMUM: Particles cast light on the environment (Art Director: KEEP)
r.ParticleLightMaxLightCount=4    ; [v5.4.0] ADDED: Limits simultaneous particle lights (performance vs quality balance)
; --- GPU Particle Compute (v3.5) ---
r.Niagara.AllowGPUParticles=1
r.Niagara.AsyncGpuTickEnabled=1
r.Niagara.GPUCompute=1
r.Niagara.GPUParticle.SimulateOnGPU=1
; --- Niagara GPU Optimizations (v3.9 - From Low Config via Oracle) ---
Niagara.GPUCulling.CPUToGPUThreshold=1024     ; [v5.0.2] Adjusted to 1024 for balanced offloading on Adreno 840
Niagara.GPUSorting.CPUToGPUThreshold=3072    ; Threshold for GPU sorting
Niagara.Ribbon.GpuEnabled=1                  ; GPU ribbon rendering
Niagara.Ribbon.Tessellation.Enabled=1        ; Ribbon tessellation
Niagara.Ribbon.Tessellation.MaxInterp=8      ; Max interpolation steps
Niagara.MinGPUInstanceCount=1024             ; [v4.5] Optimized for 8 Elite wide warp
Niagara.MinCulledGPUInstanceCount=1024       ; [v4.5] Optimized for 8 Elite wide warp
; --- FX Threading (v5.4.0 - Big.LITTLE Optimized) ---
FX.AllowAsyncTick=0               ; [v5.4.0] DISABLED: Avoids Little core scheduling overhead on Snapdragon
FX.BatchAsync=0                   ; [v5.4.0] DISABLED: Keep FX on main TaskGraph for stable frame times
FX.BatchAsyncBatchSize=48         ; (Inactive when BatchAsync=0)
FX.EarlyScheduleAsync=0           ; [v5.4.0] DISABLED: Aligned with BatchAsync=0
; --- Kuro Enhanced Character Features (v5.0 - AFME Frame Gen) ---
r.Kuro.HairQuality=2 ; High-quality hair rendering with proper strand shading
; ===================== AFME FRAME GENERATION (PRIMARY) =====================
; AFME Level 5 is the ONLY frame generation technology enabled in this config.
; It is hardware-accelerated on Adreno 840 and provides:
;   - Motion vector-based interpolation (more accurate than optical flow)
;   - Lower input latency than FSR3 FI (~8-12ms vs ~15-20ms)
;   - Clean UI rendering (no ghosting on damage numbers/skill icons)
;
; Levels: 0=Off, 1-4=Increasing quality, 5=Elite mode (Adreno 840 optimized)
;
; REQUIREMENTS for AFME to work:
;   - t.MaxFPS=60 (provides stable 60 FPS for interpolation to 120)
;   - r.FidelityFX.FSR3.FI=0 (no competing frame gen)
;   - Game Space Frame Doubler=OFF (no OS-level frame gen)
; =========================================================================
r.Kuro.AFME.Enable=5                         ; [v5.0] AFME Level 5 - Elite hardware frame gen for Adreno 840
r.Kuro.ClothSimulate=1 ; Enable cloth physics simulation for realistic movement
r.Kuro.CharacterClothQuality=2 ; High cloth detail and tessellation
r.Kuro.CharacterShadowQuality=3 ; [RESTORED] Enhanced self-shadows on characters
r.Kuro.MobileHairLODBias=0 ; No LOD reduction for hair (full quality at distance)
r.Kuro.MobileClothLODBias=0 ; No LOD reduction for cloth physics
r.KuroMobile.FacialAnimationQuality=2 ; High facial animation quality for cutscenes
r.KuroMobile.SkinCacheQuality=2 ; High skin rendering cache for smooth character rendering
r.Kuro.EnableCharacterLut=1 ; Character-specific color lookup table for better skin tones
r.KuroMobile.LensFlareQuality=3 ; High-quality lens flare effects
Kuro.InteractiveLeavesForceMobilePreview=1 ; Interactive foliage reacts to character movement
r.Kuro.EnableCharacterSSS=1 ; [v4.6] Restore character light diffusion
; --- Kuro Clean Visual Enhancements (v3.4) ---
r.Kuro.EnablePlanarReflection=1 ; Crisp planar reflections on water/floors
r.Kuro.GlobalLightQuality=4 ; Maximum lighting quality for clean shadows
r.Kuro.ToonOutlineDrawDistanceMobile=2000 ; Character outline visible at distance
r.Kuro.ToonEyeTransparentDrawDistanceMobile=800 ; Eye transparency/sparkle at distance
r.Kuro.ToonFaceShadowMeshDrawDistanceMobile=800 ; [RESTORED] Face shadow detail at distance
r.Mobile.CustomDepthForToonRim=1 ; Clean toon rim lighting on characters
r.Mobile.TreeRimLight=1 ; Crisp rim lighting on trees/foliage
r.Mobile.EnableKuroSpotlightsShadow=1 ; [RESTORED] Sharp spotlight shadows
r.Shadow.KuroEnablePointLightShadow=1 ; [RESTORED] Sharp point light shadows
; --- Kuro Extended Visual Features (v3.5) ---
r.Kuro.GlobalGIRenderQuality=3              ; High GI render quality
r.Kuro.GlobalGIResDiv=1                      ; [v3.6] Full resolution GI
r.Kuro.EnableAtmosphereLightDirection=1     ; Atmosphere light direction
r.Kuro.KuroBloomStreak=1                    ; Bloom streak effects
r.KuroCSCloth.Enable=1                      ; Compute shader cloth physics
r.KuroTonemapping=1                         ; Kuro tonemapping pipeline
r.Kuro.InteractionEffect.UseCppWaterEffect=1 ; C++ water interaction effects
r.Kuro.EffectQuality=3                       ; [v3.6] High-fidelity particles
; --- Kuro Interactive Effect Enhancements (v5.1.0 NEW) ---
r.Kuro.InteractiveWater=1         ; [v5.1.0] Skills interact with water surfaces
r.Kuro.InteractiveLeaves=1        ; [v5.1.0] Skills disturb foliage
r.Kuro.InteractiveEffects=1       ; [v5.1.0] Master toggle for interaction effects
r.Kuro.InteractivePhysics=1       ; [v5.1.0] Physics-based skill interactions
r.Kuro.DisableHoudiniNiagara=0    ; [v5.1.0] Enable Houdini-authored Niagara FX
r.Kuro.DisableKawaiiSimulate=0    ; [v5.1.0] Enable character physics reactions
r.Kuro.WaterRainDrop=1            ; [v5.1.0] Water droplet effects from skills
r.TranslucencyLightingVolumeDim=128 ; [v5.1.0] Higher resolution skill lighting
; --- Kuro Landscape (v3.5) ---
r.CapsuleKuroAO=1                           ; Capsule ambient occlusion
; --- Water Rendering ---
r.Mobile.WaterQuality=1 ; Enables high-quality water shaders
r.Mobile.WaterSSR=1 ; Enables Screen Space Reflections on water
r.Mobile.KuroGTAO.Quality=2 ; [v5.1.0] High-quality Kuro-specific GTAO pass for skills/characters
; --- Water Reflection Enhancements (v3.5) ---
r.Mobile.EnableWaterReflection=1
r.Mobile.WaterSSRResDiv=1.0
r.Mobile.WaterSSRStep=64
r.Water.WaterMesh.EnableRendering=1
r.Water.ShallowWaterRenderTargetSize=1024
; --- Threading & Vulkan ---
r.Vulkan.Enable=1 ; Best API for Snapdragon 8 Elite
r.Vulkan.UsePresentThread=1 ; [v5.2.1] Stabilizes frame delivery pacing
r.Vulkan.NumWorkerThreads=8 ; [v5.2.2] Utilize all 8 Oryon cores (2 Prime + 6 Performance)
r.Vulkan.EnableRayQuery=0 ; CRITICAL: Ray Query is experimental and causes instant crashes
r.Vulkan.MaxFrameLatency=2 ; [v5.4.0] REDUCED from 4 - reduces input latency by ~33ms
r.Vulkan.EnableBindlessRendering=1 ; [DO NOT TOUCH] Critical performance boost for 8 Elite
r.ShaderPipelineCache.Enabled=1 ; Reduces shader compilation stutters
r.ShaderPipelineCache.ReportFrameTick=1
t.MaxWorkerThreads=8 ; [v5.2.2] Syncs with Vulkan threads; utilizes all Oryon cores
TaskGraph.MaxThreads=6            ; [v5.4.0] ADDED: Matches Snapdragon 8 Gen 5 Prime+Performance core layout
r.Shaders.FastMath=1 ; Uses faster math operations for Adreno GPUs
r.Shaders.Optimize=1
; --- Vulkan Parallel Rendering (v3.5) ---
r.Vulkan.UseAsyncCompute=1
r.Vulkan.UseFramePacing=1
r.Vulkan.UseFastPipelineCreation=1
r.Vulkan.EnableParallelRendering=1
r.Vulkan.UsePreemption=1
r.Vulkan.PipelineCacheSizeMB=512             ; [v4.6] Optimized PSO cache for 8 Elite
r.Vulkan.EnablePipelineLRUCache=1            ; [v4.3] Reduces shader compile stutters
r.Vulkan.PipelineLRUCapacityMaximum=128        ; [v5.0.2] Increased for 16GB RAM overhead
r.Vulkan.PipelineCacheFromShaderPipelineCache=1 ; [v4.3] Links pipeline cache to shader cache
r.Mobile.EnableShaderCache=1                 ; [v3.6] Reduces initial region stutters
r.Vulkan.EnableDescriptorIndexing=1          ; [v4.6] Bindless descriptor indexing for Adreno 840
r.Vulkan.EnableAsyncPipelineCompilation=1    ; [v5.3.2] ADDED: Reduces PSO compilation stutter during gameplay
; --- Vulkan 1.3 Backend Enhancements (v3.9 - From Low Config via Oracle) ---
r.Vulkan.DescriptorSetReserve=2048
r.Vulkan.ThreadedCommandBufferRecording=1    ; Multi-threaded command buffer recording
r.Vulkan.Synchronization2=1                  ; Vulkan 1.3 sync primitives
r.Vulkan.EnableDynamicRendering=1            ; Dynamic rendering (no render passes)
r.Vulkan.EnableExtendedDynamicState=1        ; Extended dynamic state for reduced PSO switches
r.Vulkan.EnableExtendedDynamicState2=1       ; [v4.5] EDS2 for reduced PSO switches on 8 Elite
r.Vulkan.EnableVertexInputDynamicState=1     ; [v4.5] Vertex input dynamic state for reduced PSO switches
r.Vulkan.EnableShaderSubgroupExtendedTypes=1 ; [v4.5] Enables 16-bit math in wave ops for Adreno 840
r.Vulkan.EnablePushDescriptor=1              ; Push descriptors for faster binding
; --- [v4.0 CAUTION] Vulkan Stability Safety ---
r.Vulkan.DescriptorSetReserve=512             ; [v5.4.0] REDUCED from 2048 - optimized for Adreno hardware cache
r.Vulkan.MaxDescriptorSets=4096               ; [v5.4.0] REDUCED from 16384 - prevents driver fallback path
r.Vulkan.RobustBufferAccess=0              ; [v4.1] Disabled to reclaim 3-5% GPU performance
; --- [v4.9] Adreno 840 Specific Optimizations ---
; Qualcomm Adreno GPU optimizations for Snapdragon 8 Gen 5 with Adreno 840
r.Vulkan.Adreno.HPMCacheSize=12288          ; [v5.2.0] Corrected to Adreno 840 L2 cache specification (12MB)
r.Vulkan.Adreno.TBDR.Optimize=1             ; [v4.9] Enable Tile-Based Deferred Rendering optimizations for Adreno
r.Vulkan.Adreno.FastZClear=1                ; [v4.9] Fast Z-clear for reduced bandwidth on Adreno
r.Vulkan.Adreno.LM.Force=0                  ; [v4.9] Let Adreno driver manage local memory (LM) automatically
r.Mobile.AdrenoOcclusionMode=1              ; [v4.9] Fast hardware occlusion queries for Adreno GPUs
r.Mobile.AdrenoGPU.Debug=0                  ; [v4.9] Disable debug mode for production performance
; --- [v5.5.0-safe] Adreno 840 Hardware Features (Driver Level - Safe) ---
r.Vulkan.Adreno.LRZ.Enable=1                ; [v5.5.0-safe] Low-Resolution Z culling - hardware occlusion (+15-25% fragment throughput)
r.Mobile.EnableUBWC=1                       ; [v5.5.0-safe] Universal Bandwidth Compression - reduces LPDDR5X bandwidth
r.Vulkan.CommandPoolStrategy=1              ; [v5.5.0-safe] Per-thread command pools - reduces lock contention
; --- [v4.2] Variable Rate Shading (Adreno 840 Tier 2 VRS) ---
r.VRS.Enable=1                               ; 10-15% GPU savings in complex scenes
r.VRS.GPUTier=2                              ; [v5.4.0] ADDED: Explicit Tier 2 hardware support for Adreno 840
r.VRS.FoveationPattern=1                     ; [v5.4.0] ADDED: Foveated shading (center 1:1, edges 2x2) - Art Director approved
r.Vulkan.AllowVRS=1                          ; [v4.5] Enables hardware-level VRS on Adreno 840
r.Mobile.ForceDepthResolved=0                ; [v4.5] Keeps depth in HPM cache longer
; --- Shadow Optimization (v5.4.0 - Art Director Approved) ---
r.Shadow.MaxResolution=1536                  ; [v5.2.0] Reduced from 2048 for stable frame times (negligible visual diff on mobile DPI)
r.Shadow.MaxCSMResolution=1536               ; [v5.2.0] Matched to MaxResolution for consistency
r.Shadow.CSM.MaxCascades=3                   ; [v5.4.0] REDUCED from 4 to 3 - Art Director approved (eliminates shadow banding while saving 25% draw calls)
r.Shadow.CSM.TransitionScale=0.8
r.Shadow.FilterMethod=1
; [v4.2] Tiered PCF quality - distant cascades don't need max filtering
r.Shadow.CSM0ShadowPCFQuality=5  ; Near shadows - keep max
r.Shadow.CSM1ShadowPCFQuality=4
r.Shadow.CSM2ShadowPCFQuality=3
r.Shadow.CSM3ShadowPCFQuality=2  ; Far shadows - reduced
r.Shadow.PerObjShadowPCFQuality=4
r.CapsuleShadows=1
r.DistanceFieldShadowing=0 ; [v4.2] DISABLED: DF shadows cause leaking on mobile; CSM handles shadows
r.HeightFieldShadowing=0   ; [v4.2] DISABLED: Too heavy for 120 FPS target
; r.HFShadowQuality=3      ; [v4.2] Commented - no effect when HeightFieldShadowing disabled
r.Shadow.WholeSceneShadows=1
r.Shadow.CacheWPOPrimitives=1
r.Shadow.CSM3Distance=8000
r.Shadow.CSM4Distance=8000
r.Shadow.DistanceScale=1.0
; --- [v4.3] Fixed CSM Distances (Oracle-validated) ---
; Eliminates shadow "shimmering" during camera movement
r.Shadow.CSMEnableFixedDistance=1
r.Shadow.CSM0Distance=700                    ; Near cascade
r.Shadow.CSM1Distance=1700                   ; Mid cascade
r.Shadow.CSM2Distance=8000                   ; Far cascade
; --- Shadow Performance Stability (v3.8) ---
r.Shadow.CSMCaching=1
r.Shadow.CacheWholeSceneShadows=1
r.Shadow.WholeSceneShadowCacheMb=300
r.ParallelPrepareDynamicShadows=1
r.ParallelInitDynamicShadows=1
r.Mobile.ParallelShadows=1
r.Shadow.CSMScrollingOverlapAreaThrottle=0.75
r.Shadow.MaxNumPointShadowCacheUpdatesPerFrame=4  ; [v5.4.0] INCREASED from 2 - prevents shadow flickering during combat
r.Shadow.MaxNumSpotShadowCacheUpdatesPerFrame=4   ; [v5.4.0] INCREASED from 2 - prevents shadow flickering during combat
; --- [v5.5.0-safe] Shadow & Lighting Tuning (Visual Fixes) ---
r.Shadow.CSM.DepthBias=0.06                  ; [v5.5.0-safe] Reduces "Shadow Acne" on terrain
r.Shadow.CSM.SlopeScaleDepthBias=0.1         ; [v5.5.0-safe] Prevents peter-panning (shadow detached from feet)
r.Shadow.RadiusThreshold=0.04                ; [v5.5.0-safe] Culls tiny object shadows (reduces flickering)
r.MinScreenRadiusForLights=0.01              ; [v5.5.0-safe] Culls lights < 1% screen area
r.LightMaxClusterLights=48                   ; [v5.5.0-safe] Limits lights per 3D tile (Adreno 840 optimal)
; --- Visibility & Culling Optimizations (v3.7 - From Ultra_lite) ---
; Parallel visibility calculations for faster scene culling
r.EnableAggressivePVS=1                              ; [v4.3] Aggressive precomputed visibility culling
r.EnableWPLevelPVS=1                         ; World Partition level PVS
r.EnableNavPartition=1                       ; Navigation partitioning
r.Visibility.DynamicMeshElements.NumMainViewTasks=16   ; [v4.2] Reduced from 21 - prevents scheduler thrashing
r.Visibility.DynamicMeshElements.NumShadowViewTasks=16 ; [v4.2] Reduced from 21
r.Visibility.DynamicMeshElements.Parallel=1  ; Parallel dynamic mesh processing
r.Visibility.FrustumCull.Enabled=1           ; Frustum culling enabled
r.Visibility.FrustumCull.NumPrimitivesPerTask=0
r.Visibility.FrustumCull.UseFastIntersect=1  ; Fast intersection tests
r.Visibility.FrustumCull.UseOctree=0         ; Disabled for mobile performance
r.Visibility.FrustumCull.UseSphereTestFirst=1
r.Visibility.OcclusionCull.MaxQueriesPerTask=0
r.Visibility.Relevance.NumPrimitivesPerPacket=0
r.Visibility.SkipAlwaysVisible=1             ; Skip always-visible checks
r.Visibility.TaskSchedule=1                  ; Task-based scheduling
; --- [v4.4] Performance Micro-Optimizations (Oracle-Validated) ---
; Memory Optimization
r.FreeSkeletalMeshBuffers=1                              ; 300-500MB RAM savings
r.SkinnedMesh.ReleasePreviousLODInfoOnInitialization=1   ; LOD memory cleanup
; CPU Optimization
r.SkipRedundantTransformUpdate=1                         ; Skip unchanged transform updates
; GPU Culling
r.DownsampledOcclusionQueries=1                          ; Cheaper occlusion queries
r.CullBeforeFetch=1                                      ; Cull before GPU vertex fetch
r.CullInstances=1                                        ; Aggressive instance culling
; adreno 840 TBDR Optimization
r.Vulkan.AsyncComputeQueue=1                             ; Leverage async compute
r.Vulkan.SubmitAfterEverySubpass=0                       ; Better TBDR tile batching
r.Vulkan.SubmitAfterEveryDrawCalls=0                     ; [v5.3.1] ADDED: Enable Adreno driver draw call binning for TBDR
r.Vulkan.EnableDescriptorIndexing=1                      ; [v5.3.2] Bindless descriptors - reduces CPU overhead for high draw-call scenes (duplicate removed from line 420)
; Advanced Shadow Culling
r.Shadow.UnusedTriangleCulling=1                         ; Cull triangles outside shadow view
r.AllowSubPrimitiveQueries=1                             ; Granular occlusion
; --- RHI Command Threading (v3.7 - From Ultra_lite) ---
; Enables multi-threaded RHI command processing for better CPU utilization
r.RHICmdUseThread=1                          ; Use dedicated RHI thread
r.RHICmdUseThreadGroup=1                     ; Thread group for RHI commands
r.RHICmdAsyncRHIThreadDispatch=1             ; Async dispatch to RHI thread
r.RHICmdBypass=1                             ; Bypass for single-threaded fallback
r.RHICmdUseAsyncCompute=1                    ; Async compute queue usage
r.RHICmdMergeSmallDeferredContexts=1         ; Merge small deferred contexts
r.RHICmdTranslucencyPassDeferredContexts=1   ; Deferred translucency pass
r.RHICmdUseDeferredContexts=1                ; Use deferred command contexts
r.RHICmdUseParallelAlgorithms=1              ; Parallel command algorithms
r.RHICmdVelocityPassDeferredContexts=1       ; Deferred velocity pass
; --- Enhanced Garbage Collection (v3.1) ---
; Multi-threaded, incremental GC for smoother frame times during long sessions
gc.IncrementalReachabilityTimeLimit=0.002 ; [v5.4.0] ALIGNED with Epic default (was 0.001 - too aggressive)
gc.TimeBetweenPurgingPendingKillObjects=30.0 ; [v5.4.0] INCREASED frequency for faster cleanup during combat
gc.AllowIncrementalReachability=1 ; Spreads reachability work across frames
gc.AllowIncrementalGather=1 ; Spreads gather work across frames
gc.IncrementalGCTimePerFrame=0.002 ; [v5.4.0] ALIGNED with Epic default (was 0.001 - caused GC starvation)
gc.AllowParallelGC=1 ; Multi-core GC reduces hitching
gc.ContinuousIncrementalGC=1 ; Spreads GC work continuously
gc.MultithreadedDestructionEnabled=1 ; Faster object cleanup on multiple cores
gc.ActorClusteringEnabled=1 ; Groups related actors for efficient cleanup
gc.AssetClusteringEnabled=1 ; Groups related assets for efficient cleanup
gc.BlueprintClusteringEnabled=1 ; Groups blueprint objects for efficient cleanup
gc.CreateGCClusters=1 ; Enable GC clustering system
gc.MinGCClusterSize=5 ; Minimum cluster size for efficiency
gc.PendingKillEnabled=1 ; Standard pending kill behavior
gc.NumRetriesBeforeForcingGC=5 ; [v5.4.0] REDUCED from 10 - prevents memory bloat buildup
gc.MaxObjectsNotConsideredByGC=200 ; Small objects threshold
gc.SizeOfPermanentObjectPool=2097152 ; 2MB permanent object pool
; --- [v4.0] Core GC Settings (v5.4.0 Optimized) ---
gc.GarbageEliminationEnabled=1
gc.IncrementalBeginDestroyEnabled=1
gc.MaxObjectsInGame=4194304                   ; [v5.4.0] REDUCED from 25M to 4M - faster GC traversal, still plenty for 16GB RAM
gc.AdditionalFinishDestroyTimeGC=30
[/Script/Engine.RendererSettings]
r.EarlyZPass=3 ; Optimizes depth rendering
r.EarlyZPassMovable=1
r.Mobile.HDR=1
r.MaterialQualityLevel=1 ; Forces High material shaders
r.DetailMode=2 ; Enables all high-detail decorative objects
r.Tonemapper.Quality=5 ; [v3.5] Highest stable tonemapper logic
r.Tonemapper.Sharpen=0.8 ; [DO NOT TOUCH] Reverted to 0.8 for optimal mobile PPI balance
r.EyeAdaptation.PreExposureOverride=0.9 ; [DO NOT TOUCH] Compensation to prevent blowout
r.AmbientOcclusionLevels=3 ; Enhances contact shadows in corners/foliage
r.AmbientOcclusionMaxQuality=100 ; Ensures crisp contact shadows
r.LightShafts=1 ; Enables god rays for cinematic atmosphere
r.LightShaftQuality=2 ; [v5.1.0] MAXIMUM: High-res rays for skill bursts
r.Mobile.SceneColorFormat=3 ; [DO NOT TOUCH] Float16 for better gradients (8 Elite stable)
; --- Animation Update Rate Optimization (v3.5) ---
a.URO.Enable=1
a.URO.DisableInterpolation=0
bEnableUpdateRateOptimizations=True
bEnableAnimUpdateRateOptimizations=True
bOptimizeBoneTransforms=True
; --- Animation ISPC Vectorization (v3.9 - From Low Config via Oracle) ---
; ISPC compiler optimizations for multi-core animation processing
a.BlendCurves.ISPC=1                         ; Vectorized curve blending
a.BlendPoseAccumulate.ISPC=1                 ; Vectorized pose accumulation
a.BlendPoseOverwrite.ISPC=1                  ; Vectorized pose overwrite
a.ConstantKeyLerp.ISPC=1                     ; Vectorized constant key lerp
a.LerpBoneTransforms.ISPC=1                  ; Vectorized bone transform lerp
a.SkinnedAsset.ISPC=1                        ; Vectorized skinned asset processing
a.VariableKeyLerp.ISPC=1                     ; Vectorized variable key lerp
a.ParallelAnimInterpolation=1                ; Parallel animation interpolation
a.ParallelAnimUpdate=1                       ; Parallel animation update
a.ParallelBlendPhysics=1                     ; Parallel blend physics
a.ParallelAnimEvaluation=1                   ; [v5.4.1] Parallel animation bone evaluation
a.ParallelBoneUpdate=1                       ; [v5.5.0-safe] Parallel bone transform updates
; --- [v4.0] Additional Anim ISPC (From test.ini) ---
a.AccumulateLocalSpaceAdditivePose.ISPC=1
a.BonePose.ISPC=1
a.ConvertMeshRotationPoseToLocalSpace.ISPC=1
a.ConvertPoseToAdditive.ISPC=1
a.ConvertPoseToMeshRotation.ISPC=1
a.PerTrackCompression.ISPC=1
a.BlendPosesPerBoneFilter.ISPC=1
; --- Mobile-Specific Optimizations (v5.4.0 - Zero Visual Impact) ---
r.Mobile.ReduceMemoryUsage=1                 ; [v5.4.0] ADDED: Clears transient render targets
r.Mobile.DisableVertexFog=1                  ; [v5.4.0] ADDED: Art Director suggestion - reduces stutter
r.Mobile.MaxVisibleMovableSpotLights=2       ; [v5.4.0] ADDED: Limits dynamic spot lights during combat
r.Mobile.MaxVisibleParticles=1500            ; [v5.4.0] ADDED: Safety valve for particle storms
r.ParallelGatherScenePrimitives=1            ; [v5.4.0] ADDED: Parallelizes expensive scene gathering
; --- Mobile Quality Flags (v3.5) ---
r.Mobile.UseHWsRGBEncoding=1
r.Mobile.UseClusteredDeferredShading=1
r.Mobile.SupportsGen4TAA=1
r.Mobile.HighQualitySkyCaptureFiltering=1
r.Mobile.UseHalfResDepth32=1
; --- Mesh Distance Fields (v3.5) ---
r.GenerateMeshDistanceFields=1
TaskGraph.EnableForkedMultithreading=1
; --- Color Balance (Warm Color Enhancement - v3.3 Refined) ---
r.TonemapperFilm=1 ; Filmic tonemapper - preserves warm highlights (orange/red/pink)
r.TonemapperGamma=2.2 ; Standard sRGB gamma curve
r.Color.Gain.R=1.03 ; [v3.5] Red boost (+3%)
r.Color.Gain.G=0.95 ; [v3.3] Adjusted green (-5% from neutral, +1% from v3.2)
r.Color.Gain.B=1.0 ; Standard blue (neutral)
; ==========================================================================================
;       STREAMING SETTINGS (v4.0 Enhanced)
; ==========================================================================================
[/Script/Engine.StreamingSettings]
r.TextureStreaming=1
r.Streaming.Boost=1.25 ; Moderate boost to prioritize visible textures
r.Streaming.FullyLoadUsedTextures=0 ; Stream textures instead of forcing full load
r.Streaming.UseAsyncRequestsForDDC=1 ; Async requests prevent stalls
r.Streaming.UseBackgroundThreadPool=1 ; Background thread pool for streaming
r.Streaming.MinBoost=1.0 ; Keep min boost reasonable
r.Streaming.PoolSize=6144                    ; [v5.5.0-safe] INCREASED from 4096 to 6GB - eliminates texture thrashing
r.Streaming.MaxBandwidth=200000              ; [v5.5.0-safe] DOUBLED for UFS 4.0 utilization
r.Streaming.AmortizeCPUUsage=1               ; [v3.6] Smoother texture loading
r.Streaming.UseFixedPoolSize=1 ; Fixed pool size for stability
r.Streaming.UseMaterialData=1 ; Optimize streaming decisions with material data
r.Streaming.UseNewMetrics=1 ; Better quality/performance balance
r.Streaming.UsePerTextureBias=1 ; Per-texture biasing for memory optimization
s.AsyncLoadingThreadEnabled=1
s.EventDrivenLoaderEnabled=1 ; Async streaming
s.WarnIfTimeLimitExceeded=0 ; Disable warnings for cleaner logs
s.UseBackgroundLevelStreaming=1 ; Eliminates stalls
s.UnregisterComponentsTimeLimit=0.5 ; [v5.3.3] Extremely tight unregistration
s.LevelStreamingComponentsUnregistrationGranularity=2
s.FlushStreamingOnExit=1
s.AsyncLoadingTimeLimit=1.0 ; [v5.3.3] Reduce async loading time budget for smoothness
; --- [v5.5.0-safe] UFS 4.0 IO Optimization ---
s.IoDispatcher.MaxParallelRequests=64        ; [v5.5.0-safe] Massive UFS 4.0 queue depth utilization
s.LevelStreamingActorsUpdateTimeLimit=1.5    ; [v5.5.0-safe] Increased from 1.0 - caps frame spikes
s.LevelStreamingComponentsRegistrationGranularity=10 ; [v5.5.0-safe] INCREASED from 5 - more actors per frame
; --- Streaming Optimizations (v3.5 - Eggsie) ---
r.Streaming.GroupBoost.CommonHLODTextureFactor=0.6
r.Streaming.GroupBoost.HugeBuildingTextureFactor=0.6
r.Streaming.GroupBoost.HugeFoliageTextureFactor=0.6
r.Streaming.GroupBoost.HugeNpcTextureFactor=0.6
r.Streaming.GroupBoost.LandscapeHLODTextureFactor=0.6
r.Streaming.GroupBoost.LargeBuildingTextureFactor=0.6
r.Streaming.GroupBoost.LargeFoliageTextureFactor=0.6
r.Streaming.GroupBoost.LargeNpcTextureFactor=0.6
r.Streaming.PoolSizeForMeshes=1000
r.RenderTargetPoolMin=0                      ; [v5.4.0] REDUCED from 400 - allows pool shrinking to free GPU memory
; --- Extended IO Dispatcher (v4.0 Enhanced) ---
s.IoDispatcherBufferAlignment=6144
s.IoDispatcherBufferMemoryMB=384
s.IoDispatcherBufferSizeKB=384
s.IoDispatcherCacheSizeMB=512 ; [v5.4.0] REDUCED from 2048 - frees ~1.5GB for GPU memory pool
s.IoDispatcherRequestLatencyCircuitBreakerMS=0
s.IoDispatcherSortRequestsByOffset=1
s.IoDispatcherTocsEnablePerfectHashing=1
s.StorageServerIoDispatcherBatchSize=16
s.StorageServerIoDispatcherMaxActiveBatchCount=4
s.StreamableDelegateDelayFrames=1
s.TimeLimitExceededMultiplier=4.5
; --- Enhanced IO & Streaming (v3.9) ---
s.LargeMemoryDataMaxPoolLength=4             ; Increased pool for 16GB RAM
s.MaxIncomingRequestsToStall=100             ; Higher stall threshold for UFS 4.0
s.MaxPrecacheRequestsInFlight=4              ; More concurrent precache requests
s.OptimizeActorRegistration=1                ; Optimized actor registration
s.PriorityAsyncLoadingExtraTime=75           ; Extra time for priority loading
s.OnlyProcessRequiredPackagesWhenSyncLoading=1 ; Reduce sync load overhead
s.LevelStreamingLowMemoryPendingPurgeCount=2147483647 ; [v4.0] Aggressive purging to save RAM
r.Streaming.AllowParallelRenderAssetStreamingManagerIncrementalUpdate=1
r.Streaming.EnableTexturesSamplingStreamingCache=1
r.Streaming.MaxEffectiveScreenSize=2160      ; 4K streaming target
r.Streaming.FramesForFullUpdate=1            ; Faster streaming updates
; --- Virtual Textures (v3.5) ---
r.VirtualTextures=1
r.VirtualTexturedLightmaps=1
r.VT.AnisotropicFiltering=16
r.VT.MaxAnisotropy=16
r.VT.PoolSize=2048
r.VT.TileSize=512
; ==========================================================================================
;       SHADER PRECOMPILATION (v3.1) - Reduces First-Time Stuttering
; ==========================================================================================
[DevOptions.Shaders]
bAllowPrecompiledShaders=True
bCompilePreloadShaders=True
bForcePrecompiledShaders=True
bPrecompileVisibleShadersForRendering=True
bPreloadAllShaders=True
bPreloadShaderCacheOnDemand=True
bPreloadShadersOnDemand=True
bUsePrecompiledShaders=True
bWaitForShaderCompilation=True
; ==========================================================================================
;       ANDROID RUNTIME SETTINGS (v3.1)
; ==========================================================================================
[/Script/AndroidRuntimeSettings.AndroidRuntimeSettings]
a.UseSwappyForFramePacing=0 ; DISABLED: Native frame gen handles pacing internally
bEnableDynamicMaxFPS=True ; [v3.1] ENABLED: Allows native frame gen to dynamically adjust FPS
bSupportsVulkanSM5=True
r.VSync=0
rhi.SyncInterval=0
; ==========================================================================================
;       CONSOLE VARIABLES (v3.1)
; ==========================================================================================
[ConsoleVariables]
t.MaxWorkerThreads=8
log.LogSuppressed=1 ; Suppress log spam
; --- PSO Precaching (v3.7 - From Ultra_lite) ---
; Reduces shader compilation stutters by precompiling pipeline state objects
r.pso.CreateOnRHIThread=1                    ; Create PSOs on RHI thread
r.pso.evictiontime=20                        ; PSO cache eviction time (seconds)
r.pso.PrecompileThreadPoolPercentOfHardwareThreads=80 ; Use 80% of threads for precompile
r.PSOPrecache.Components=1                   ; Precache component PSOs
r.PSOPrecache.GlobalComputeShaders=1         ; Precache compute shaders
r.PSOPrecaching=1                            ; Enable PSO precaching system
shaderpipeline.MinPrecompileTasksInFlight=6  ; Minimum concurrent precompile tasks
; ==========================================================================================
;       LOG SUPPRESSION (v3.1) - Reduces Disk I/O
; ==========================================================================================
[Core.Log]
Global=off
LogTemp=off
LogOnline=off
LogAudio=off
LogInit=off
LogRender=off
LogStreaming=off
LogMemory=off
LogPakFile=off
LogNet=off
LogNetPackageMap=off
LogAndroid=off
LogVulkan=off
LogShaderCompilers=off
LogPSO=off
LogRHI=off
LogEditorAnalytics=off
LogHMD=off
LogConfig=off
LogStats=off
LogHLOD=off
LogGarbage=off
LogTexture=off
LogMaterial=off
LogLightRendering=off
LogRenderer=off
LogOcclusion=off
LogNavMesh=off
LogLoad=off
LogAssetRegistry=off
