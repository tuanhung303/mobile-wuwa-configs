; ==========================================================================================
;       WuWa Mobile Config - Ultimate Edition v5.9.9-thermal
;       Performance.ini - CPU/GPU/Memory Optimization
; ==========================================================================================
; Optimized for: Snapdragon 8 Elite (Gen 5) / 16GB RAM / Adreno 840 - THERMAL OPTIMIZED
; Target: 120 FPS via AFME Hardware Frame Generation (native 60 FPS + AFME interpolation)
;
; v5.9.9-thermal Changes: SGSR2 CLARIFICATION & CLEANUP:
;               - Synced with Engine.ini v5.9.9 removal of non-functional SGSR2 CVars
; v5.9.8-thermal Changes: SYNC WITH ENGINE.INI CONFLICT RESOLUTION:
;               - Synced with Engine.ini v5.9.8 duplicate removal and VT AF changes
;               - No Performance.ini specific changes required
; v5.9.7-thermal Changes: EXPERT-VALIDATED THREAD OPTIMIZATION:
;               - TaskGraph.MaxThreads=5: N-1 rule for AFME stability (was 6)
;               - r.Threading.LittleCoreAffinity=0-4: Pin to 5 Performance cores (was 0-5)
;               - Rationale: Prevents cache thrashing and context switching on Oryon
;               - Expert Validation: CPU Architecture Specialist confirmed N-1 optimal
; v5.9.6-thermal Changes: THERMAL RESEARCH INTEGRATION:
;               - Synced with Engine.ini v5.9.6 AFME 2.0 and documentation enhancements
; v5.9.4-stable Changes: TECH LEAD REFINEMENT:
;               - Synced with Engine.ini v5.9.3 particle/Niagara enhancements
; v5.9.2-stable Changes: DEEP CONTRAST + PARRY RESPONSE:
;               - HDR: DISABLED + Inky Black color curve (OLED-optimized)
;               - MaxFrameLatency: Reduced to 3 for better parry response vs v5.9.1
;               - Color Precision: Forced 32-bit (Format=3) to prevent banding
; v5.9.1-stable Changes: 60 FPS STABILITY + HDR DISABLED:
;               - HDR: DISABLED for GPU overhead reduction (~8-12% savings)
;               - MaxFrameLatency: Increased to 4 for maximum frame pacing stability
;               - Synced with Engine.ini v5.9.1 balanced compensation settings
; v5.9.0-final Changes: FULL HARDWARE (Elite Performance):
;               - Switched to Native Compute TAA Architecture (Replaced FSR software stack)
;               - Reclaimed 10% GPU overhead for sustained thermal stability
;               - Optimized for AFME Level 5 motion vector high-precision delivery
;               - Enforced 16x Anisotropic Filtering for hardware texture clarity
; v5.8.1-final Changes: NATURAL VISION (Anti-Plastic & Infinite Stability):
;               - Synced with Engine.ini v5.8.1 natural vision enhancements
;               - Switched to Cinematic Tonemapping (Mode 3) for realistic shading
;               - Pushed foliage tiers: Far (600m), SuperFar (1km), Impostors (1.8km)
;               - Reduced highlight ceiling to 1.1 to eliminate plastic look
;               - Added film grain (0.15) for material texture depth
; v5.8.0-final Changes: VIVID REALITY (Visual Fidelity):
;               - Synced with Engine.ini v5.8.0 high-end atmospheric/shadow fixes
;               - Enabled Kuro SSFS (Screen Space Filtering) for cinematic light shafts
;               - Enabled HBAO for realistic grounding shadows and corner depth
;               - Enabled Temporal Reflection Denoising (Removes grain from reflections)
;               - Enabled Kuro GI (Level 2) for realistic indirect character lighting
; v5.7.0-optimal Changes: OPTIMAL VISION (Izuru Study Integration):
;               - Synced with Engine.ini v5.7.0 draw distance optimizations
;               - Switched to Kuro-specific foliage centimeter-based distance path
;               - Locked high-detail terrain (LOD0) to 250m radius
;               - Optimized Shadow Cascades (3 cascades, 1024 res) for stable bandwidth
;               - Enabled custom Kuro GPUScene for efficient hardware offloading
; v5.6.0-stable Changes: PERFORMANCE & STABILITY FOCUS:
;               - Synced with Engine.ini v5.6.0 performance optimizations
;               - Added r.ParallelBeginFrame=1 for better multi-core utilization
;               - Added r.Mobile.HalfPrecisionAlbedo=1 for GPU throughput
;               - Added gc.MaxObjectsNotConsideredByGC=200000 for GC stability
; v5.5.0-safe Changes: SAFE OPTIMIZATIONS ONLY:
;               - Core Affinity: Expanded LittleCoreAffinity to 0-5 (all Performance cores)
;               - Streaming: Increased pool to 6GB, doubled bandwidth for UFS 4.0
;               - Synced with Engine.ini v5.5.0-safe (risky settings excluded)
; v5.4.1 Changes: DRAW CALL OPTIMIZATION SYNC (Senior UE4 Graphics Tech Lead):
;               - Synced with Engine.ini v5.4.1 draw call batching optimizations
; v5.4.0 Changes: COMBAT STABILITY SYNC (Senior UE4 Graphics Tech Lead):
;               - TaskGraph: Added MaxThreads=6 aligned with SD8G5 core layout
;               - IoDispatcher: Reduced cache from 2048→512MB (frees GPU memory headroom)
;               - Synced with Engine.ini v5.4.0 combat stability fixes
; v5.3.3 Changes: VERSION SYNC (Senior UE4 Graphics Tech Lead):
;               - Synced with Engine.ini v5.3.3 AFME stability optimizations
; v5.3.2 Changes: VERSION SYNC (Senior UE4 Graphics Tech Lead):
;               - Synced with Engine.ini v5.3.2 frame time micro-optimizations
; v5.3.1 Changes: FRAME TIME STABILITY (Senior UE4 Graphics Tech Lead):
;               - Streaming: LimitPoolSizeToVRAM=0 for unified memory architecture
; v5.3.0 Changes: FULL PERFORMANCE UNLOCKED (Senior UE4 Tech Lead):
;               - GPU Clock: Unlocked to 1.0 (Full clock for RedMagic active cooling)
;               - Thermal Threshold: Locked to 48C (Optimized for stable 120 FPS)
; v5.2.2 Changes: NORMAL MODE OPTIMIZATION (Senior UE4 Tech Lead):
;               - GPU Clock: Set to 0.92 for sustained performance with low-speed fan
;               - Thermal Threshold: Set to 46C (balanced for normal mode active cooling)
;               - NOTE: For Diablo Mode (max fan), use 1.0 GPU clock and 49C threshold
; v5.2.1 Changes: THERMAL LIMITS (Senior UE4 Tech Lead):
;               - Increased ThermalThreshold to 49 for RedMagic active cooling
; v5.1.0 Changes: SKILL FX ENHANCED (Senior UE4 Tech Lead):
;               - Verified thermal headroom for Niagara Quality Level 3
; v5.0.2 Changes: THERMAL STABILITY (Senior UE4 Tech Lead):
;               - Reduced ThermalThreshold to 45 for better sustained performance
; v5.0 Changes: GPU CLOCK UNLOCKED FOR ACTIVE COOLING:
;               - GPU Clock: Increased to 1.0 (gaming phone with fan/liquid cooling)
;               - Previous 0.85 was conservative for passively-cooled flagships
;               - With RedMagic ICE 13.0 cooling, full clock is sustainable
; v5.0.1 Changes: DUPLICATE SETTINGS REMOVED (Performance.ini cleanup)
;               - Removed duplicate r.Threading.BigCoreAffinity/LittleCoreAffinity
;               - These are already set in CPU Scheduling section
; v4.9 Changes: OPTIMIZED FOR SNAPDRAGON 8 gen 5 (ADRENO 840):
;               - GPU Clock: 0.85 (thermal headroom for sustained 60 FPS)
;               - CPU Affinity: Oryon Prime (6-7) + Performance (4-5) cores
;               - Thermal: Threshold 42C for sustained performance
;               - Memory: 4GB streaming pool aligned with 16GB RAM
; ==========================================================================================

[Performance]
; ============================================
;       CPU Scheduling (v5.5.0-safe Updated)
; ============================================
; Snapdragon 8 gen 5 - 2x Oryon Prime (up to 4.6GHz) + 6x Oryon Performance (up to 3.6GHz)
; NOTE: SD8 Elite has NO "Little" cores - all 8 cores are high-performance Oryon
; Pins Main/Render to Prime cores (6-7); Workers use 5 of 6 Performance cores (0-4)
; [v5.9.7] N-1 Rule: Reserve 1 core (Core 5) for OS/AFME driver to prevent context switching
r.Threading.BigCoreAffinity=6-7
r.Threading.LittleCoreAffinity=0-4           ; [v5.9.7] CHANGED from 0-5 - pin to 5 Performance cores
r.Threading.RenderThreadPriority=1
r.KuroEnableCustomAffinity=1

; ============================================
;       TaskGraph Threading [v5.9.7]
; ============================================
; SD8G5: 2x Prime + 6x Performance = 8 cores total
; [v5.9.7] Expert-Validated: N-1 rule for AFME stability
; 2 (GT/RT) + 5 (TaskGraph Workers) = 7 Threads / 8 Cores
; Leaves 1 core free for OS/Background and AFME driver
TaskGraph.MaxThreads=5                       ; [v5.9.7] CHANGED from 6 - N-1 rule

; ============================================
;       GPU Clock Control (Adreno 840)
; ============================================
; GPU Clock Scale determines maximum GPU frequency as a percentage of peak (1.2GHz on Adreno 840)
r.Mobile.AllowAsyncCompute=1                 ; [v5.9.4] Async Compute offloading (VFX/Post)
r.Mobile.ConcurrentBinning=1                 ; [v5.9.4] Concurrent Binning
r.Mobile.AdrenoGPU.ConcurrentBinning=1       ; [v5.9.4] Adreno-specific binning
;
; ACTIVE COOLING (Gaming phones with fan/liquid cooling - RedMagic, ROG, etc.):
;   - Use 0.95-1.0 for maximum performance
;   - ICE 13.0 cooling sustains peak clocks without thermal throttling
;
; PASSIVE COOLING (Standard flagships - Galaxy S25, Pixel, etc.):
;   - Use 0.80-0.85 to prevent thermal throttling after 10-15 minutes
;   - Higher values will cause frequency drops during sustained gaming
;
; Current setting optimized for: Full Performance (Active Cooling Required)
r.Vulkan.MaxGPUClockScale=1.0                 ; [v5.3.0] Full clock speed (1.2GHz) for Adreno 840

; ============================================
;       Memory Budget (16GB RAM) - v5.5.0-safe
; ============================================
; [v5.5.0-safe] 6GB streaming pool - eliminates texture thrashing
r.Streaming.PoolSize=6144
r.Streaming.MemoryBudget=6144
r.Streaming.LimitPoolSizeToVRAM=0 ; [v5.3.1] Disabled - Android uses Unified Memory Architecture (UMA); allows full 16GB utilization
r.Streaming.MaxBandwidth=250000              ; [v5.9.4] BALANCED for 120Hz SLC stability (8 Gen 5)
r.Streaming.MinBandwidth=60000               ; [v5.9.4] Safe floor for SLC headroom
r.Streaming.AmortizeCPUUsage=1

; ============================================
;       I/O Dispatcher Cache [v5.4.0]
; ============================================
; [v5.4.0] Reduced from 2048→512MB to free GPU memory headroom during combat
; SD8G5 has fast UFS 4.0 storage, so smaller cache doesn't impact load times
s.IoDispatcherCacheSizeMB=512

; --- Thermal Management (Adreno 840 - Full Performance Mode) ---
r.Android.ThermalMitigation=1
r.Android.ThermalThreshold=48                   ; [v5.3.0] Optimized for stable 120 FPS with active cooling
r.Android.PowerSavingMode=0

; ============================================
;       Frame Pacing - SYNCED WITH ENGINE.INI V5.0
; ============================================
; [v5.0] Native hardware frame gen (AFME) handles pacing internally
; CPU affinity is set in the CPU Scheduling section above (removed duplicate)
